# ğŸ“ éƒ¨ç½²è¿›åº¦è®°å½•

## ğŸ“… æ—¥æœŸï¼š2025å¹´12æœˆ1æ—¥

## âœ… ä»Šå¤©å·²å®Œæˆçš„å·¥ä½œ

### 1. MongoDB Atlas é…ç½®
- âœ… æ³¨å†Œäº† MongoDB Atlas è´¦å·
- âœ… åˆ›å»ºäº†å…è´¹é›†ç¾¤ï¼ˆCluster0ï¼‰
- âœ… åˆ›å»ºäº†æ•°æ®åº“ç”¨æˆ·ï¼š
  - ç”¨æˆ·åï¼š`wanglucius1_db_user`
  - å¯†ç ï¼š`TsEwDc2i0Z2I1HLV`
- âœ… è·å–äº†è¿æ¥å­—ç¬¦ä¸²ï¼š
  ```
  mongodb+srv://wanglucius1_db_user:TsEwDc2i0Z2I1HLV@cluster0.zv5orxz.mongodb.net/totofun-treasure?appName=Cluster0
  ```
- âš ï¸ **å¾…å®Œæˆ**ï¼šé…ç½®ç½‘ç»œè®¿é—®ï¼ˆéœ€è¦æ·»åŠ  `0.0.0.0/0`ï¼‰

### 2. Vercel éƒ¨ç½²
- âœ… æ³¨å†Œäº† Vercel è´¦å·
- âœ… æˆæƒäº† GitHub è®¿é—®
- âœ… å¯¼å…¥äº† `douyin-treasure` ä»“åº“
- âœ… é…ç½®äº†é¡¹ç›®ï¼š
  - é¡¹ç›®åï¼š`totofun-server007`
  - Frameworkï¼šExpress
  - Root Directoryï¼š`server`
- âœ… è®¾ç½®äº†ç¯å¢ƒå˜é‡ï¼š
  - `MONGODB_URI`ï¼šå·²è®¾ç½®
  - `JWT_SECRET`ï¼š`nxvTEG53Mb2k0DAO7IyrtgU9hNdi1fceouWHJq84XQ6jzCaBYRLPmwKlpSZVFs`
  - `JWT_REFRESH_SECRET`ï¼š`YkKryAeDNfZWvh2dGOFHwxj0lB7gVsJb86UXoSPuMnRmcp1zIaCtEQ9iqT435L`
  - `JWT_EXPIRES_IN`ï¼š`7d`
  - `NODE_ENV`ï¼š`production`
  - `CLIENT_URL`ï¼š`https://luciuswang.github.io`
- âœ… éƒ¨ç½²æˆåŠŸï¼ŒçŠ¶æ€æ˜¾ç¤º "Ready"
- âœ… éƒ¨ç½²åœ°å€ï¼š`https://totofun-server007.vercel.app`

### 3. å‰ç«¯é…ç½®
- âœ… æ›´æ–°äº† `index.html` ä¸­çš„ API é…ç½®
- âœ… è®¾ç½®äº† `CLOUD_API_URL`ï¼š`https://totofun-server007.vercel.app`
- âœ… å·²æ¨é€åˆ° GitHub

### 4. ä»£ç ä¿®å¤
- âœ… ä¿®å¤äº† `vercel.json` é…ç½®å†²çªï¼ˆroutes â†’ rewritesï¼‰
- âœ… ä¼˜åŒ–äº†æœåŠ¡å™¨ä»£ç æ”¯æŒ Vercel Serverless

## âš ï¸ å½“å‰é—®é¢˜

### é—®é¢˜ï¼šè¿æ¥è¶…æ—¶ï¼ˆERR_CONNECTION_TIMED_OUTï¼‰

**è®¿é—®åœ°å€**ï¼š`https://totofun-server007.vercel.app/health`

**å¯èƒ½åŸå› **ï¼š
1. MongoDB Atlas ç½‘ç»œè®¿é—®æœªé…ç½®ï¼ˆæœ€å¯èƒ½ï¼‰
2. Serverless å‡½æ•°å†·å¯åŠ¨éœ€è¦æ—¶é—´
3. ç¯å¢ƒå˜é‡é…ç½®é—®é¢˜

## ğŸ”œ æ˜å¤©éœ€è¦å®Œæˆçš„å·¥ä½œ

### ç¬¬ä¸€ä¼˜å…ˆçº§ï¼šè§£å†³è¿æ¥è¶…æ—¶é—®é¢˜

1. **é…ç½® MongoDB Atlas ç½‘ç»œè®¿é—®**
   - è®¿é—®ï¼šhttps://cloud.mongodb.com
   - è¿›å…¥é¡¹ç›® â†’ "Network Access"ï¼ˆç½‘ç»œè®¿é—®ï¼‰
   - ç‚¹å‡» "Add IP Address"
   - é€‰æ‹© "Allow Access from Anywhere"ï¼ˆ`0.0.0.0/0`ï¼‰
   - ç‚¹å‡» "Confirm"
   - ç­‰å¾…å‡ ç§’é’Ÿç”Ÿæ•ˆ

2. **æµ‹è¯•éƒ¨ç½²**
   - è®¿é—®ï¼š`https://totofun-server007.vercel.app/health`
   - åº”è¯¥çœ‹åˆ° JSON å“åº”ï¼š
     ```json
     {
       "status": "ok",
       "timestamp": "...",
       "uptime": ...,
       "environment": "production"
     }
     ```

3. **å¦‚æœè¿˜æ˜¯è¶…æ—¶ï¼Œæ£€æŸ¥ Vercel æ—¥å¿—**
   - åœ¨ Vercel Dashboard â†’ "Logs" â†’ "Runtime Logs"
   - æŸ¥çœ‹å…·ä½“é”™è¯¯ä¿¡æ¯
   - ç‰¹åˆ«å…³æ³¨ MongoDB è¿æ¥é”™è¯¯

### ç¬¬äºŒä¼˜å…ˆçº§ï¼šæµ‹è¯•å®Œæ•´åŠŸèƒ½

1. **ç­‰å¾… GitHub Pages æ›´æ–°**ï¼ˆçº¦1-2åˆ†é’Ÿï¼‰
2. **è®¿é—®å‰ç«¯é¡µé¢**ï¼šhttps://luciuswang.github.io/douyin-treasure/
3. **æµ‹è¯•æ³¨å†ŒåŠŸèƒ½**
   - æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰
   - ç‚¹å‡»"ç™»å½•/æ³¨å†Œ"
   - å°è¯•æ³¨å†Œæ–°è´¦å·
   - æ£€æŸ¥ Network æ ‡ç­¾ï¼Œç¡®è®¤è¯·æ±‚å‘é€åˆ° Vercel
4. **æµ‹è¯•ç™»å½•åŠŸèƒ½**
   - ä½¿ç”¨æ³¨å†Œçš„è´¦å·ç™»å½•
   - ç¡®è®¤ç™»å½•æˆåŠŸ

### ç¬¬ä¸‰ä¼˜å…ˆçº§ï¼šä¼˜åŒ–å’Œæ–‡æ¡£

1. å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œæ›´æ–°éƒ¨ç½²æ–‡æ¡£
2. è®°å½•æœ€ç»ˆé…ç½®
3. æµ‹è¯•å…¶ä»–åŠŸèƒ½ï¼ˆå¦‚èŠå¤©ã€å¯»å®ç­‰ï¼‰

## ğŸ“‹ é‡è¦ä¿¡æ¯è®°å½•

### MongoDB Atlas
- **é›†ç¾¤åœ°å€**ï¼š`cluster0.zv5orxz.mongodb.net`
- **æ•°æ®åº“å**ï¼š`totofun-treasure`
- **ç”¨æˆ·å**ï¼š`wanglucius1_db_user`
- **å¯†ç **ï¼š`TsEwDc2i0Z2I1HLV`
- **è¿æ¥å­—ç¬¦ä¸²**ï¼š
  ```
  mongodb+srv://wanglucius1_db_user:TsEwDc2i0Z2I1HLV@cluster0.zv5orxz.mongodb.net/totofun-treasure?appName=Cluster0
  ```

### Vercel
- **é¡¹ç›®å**ï¼š`totofun-server007`
- **éƒ¨ç½²åœ°å€**ï¼š`https://totofun-server007.vercel.app`
- **GitHubä»“åº“**ï¼š`Luciuswang/douyin-treasure`
- **åˆ†æ”¯**ï¼š`main`

### å‰ç«¯
- **GitHub Pagesåœ°å€**ï¼š`https://luciuswang.github.io/douyin-treasure/`
- **APIåœ°å€**ï¼š`https://totofun-server007.vercel.app`

## ğŸ”— æœ‰ç”¨çš„é“¾æ¥

- **MongoDB Atlas**ï¼šhttps://cloud.mongodb.com
- **Vercel Dashboard**ï¼šhttps://vercel.com/dashboard
- **GitHubä»“åº“**ï¼šhttps://github.com/Luciuswang/douyin-treasure
- **å‰ç«¯é¡µé¢**ï¼šhttps://luciuswang.github.io/douyin-treasure/
- **åç«¯å¥åº·æ£€æŸ¥**ï¼šhttps://totofun-server007.vercel.app/health

## ğŸ“ å¤‡æ³¨

- æ‰€æœ‰ä»£ç æ›´æ”¹å·²æ¨é€åˆ° GitHub
- Vercel ä¼šè‡ªåŠ¨æ£€æµ‹ GitHub æ›´æ–°å¹¶é‡æ–°éƒ¨ç½²
- MongoDB è¿æ¥å­—ç¬¦ä¸²å·²ä¿å­˜åœ¨ç¯å¢ƒå˜é‡ä¸­
- JWT å¯†é’¥å·²ç”Ÿæˆå¹¶ä¿å­˜åœ¨ç¯å¢ƒå˜é‡ä¸­

## ğŸ¯ æ˜å¤©ç¬¬ä¸€æ­¥

1. æ‰“å¼€ MongoDB Atlas
2. é…ç½®ç½‘ç»œè®¿é—®ï¼ˆæ·»åŠ  `0.0.0.0/0`ï¼‰
3. æµ‹è¯•å¥åº·æ£€æŸ¥ç«¯ç‚¹
4. å¦‚æœæˆåŠŸï¼Œæµ‹è¯•æ³¨å†Œ/ç™»å½•åŠŸèƒ½

---

**è®°å½•æ—¶é—´**ï¼š2025å¹´12æœˆ1æ—¥  
**ä¸‹æ¬¡ç»§ç»­**ï¼šé…ç½® MongoDB ç½‘ç»œè®¿é—® â†’ æµ‹è¯•éƒ¨ç½² â†’ æµ‹è¯•åŠŸèƒ½

