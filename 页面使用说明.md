# 📱 TotoFun 宝藏猎人 - 使用说明

## 🚀 快速开始

### 打开页面后会自动：
1. ✅ 加载地图（无需配置）
2. ✅ 请求位置权限
3. ✅ 显示附近宝藏
4. ✅ 准备就绪，开始寻宝！

---

## 🎮 主要功能

### 1️⃣ 地图寻宝
- **查看宝藏**：地图上的标记点就是宝藏位置
- **查看任务**：商家发布的任务也会显示在地图上
- **重新定位**：点击"📍 重新定位"按钮刷新位置
- **放置宝藏**：点击"🎁 放置宝藏"创建新宝藏

### 2️⃣ 好友聊天
- **打开聊天**：点击右下角 💬 按钮
- **添加好友**：点击 **+** 按钮，输入好友ID
- **开始聊天**：点击好友头像进入聊天界面
- **分享位置**：在聊天中点击 📍 按钮分享位置

### 3️⃣ 个人信息
- **查看信息**：点击聊天界面的 👤 按钮
- **修改昵称**：输入新昵称并保存
- **选择头像**：点击喜欢的头像图标
- **查看统计**：好友数量、消息总数

---

## 📍 位置权限

### 首次使用时：
1. 浏览器会弹出"允许获取位置"提示
2. 点击"允许"或"Allow"
3. 地图会自动定位到你的位置

### 如果拒绝了权限：
- 地图会使用默认位置（上海）
- 可以在浏览器设置中重新允许位置权限
- 刷新页面后重新授权

---

## 🎯 寻宝流程

### 步骤1：查看地图
- 地图加载后会显示你的位置（蓝色标记）
- 附近的宝藏会显示为各种emoji图标

### 步骤2：选择目标
- 点击地图上的宝藏标记
- 查看宝藏详情（类型、奖励、距离）
- 决定是否前往

### 步骤3：前往寻宝
- 根据地图导航到宝藏位置
- 靠近宝藏后点击"发现宝藏"
- 获得奖励和经验值

### 步骤4：分享发现
- 在聊天中告诉好友
- 分享宝藏位置
- 邀请好友一起寻宝

---

## 💬 聊天功能

### 添加好友的3种方式：

#### 方式1：通过ID添加
```
1. 点击💬 → 点击 + 按钮
2. 复制你的ID
3. 发送给朋友（微信、QQ等）
4. 输入朋友的ID → 添加好友
```

#### 方式2：分享链接
```
1. 点击💬 → 点击 + 按钮
2. 点击"生成分享链接"
3. 链接自动复制到剪贴板
4. 发送给朋友，点击即可添加
```

#### 方式3：面对面添加
```
1. 点击💬 → 点击👤按钮
2. 显示你的ID给朋友
3. 朋友输入你的ID添加
4. 你也添加朋友的ID
```

### 聊天操作：
- **发送消息**：输入文字 → 按Enter或点击"发送"
- **分享位置**：点击 📍 按钮
- **查看位置**：点击收到的位置消息

---

## 🎨 界面说明

### 顶部区域
- **Logo和标题**：TotoFun 突突翻
- **统计信息**：宝藏数量、用户数量、任务数量

### 地图区域
- **蓝色标记**：你的当前位置
- **各种emoji**：不同类型的宝藏
- **红色标记**：商家任务位置

### 控制按钮
- **📍 重新定位**：刷新GPS位置
- **🎁 放置宝藏**：创建新宝藏
- **🏪 商家入口**：商家后台登录

### 右下角
- **💬 聊天按钮**：打开好友聊天
- **红色徽章**：未读消息数量

---

## 🔧 常见问题

### Q1: 地图加载失败？
**A:** 
- 检查网络连接
- 刷新页面重试
- 确保浏览器支持（Chrome、Edge、Safari）

### Q2: 定位不准确？
**A:** 
- 在户外环境使用效果最好
- 室内GPS信号弱，可能不准
- 尝试点击"重新定位"按钮

### Q3: 看不到宝藏？
**A:** 
- 可能附近没有宝藏
- 尝试放大地图查看
- 或者自己放置宝藏

### Q4: 聊天功能不工作？
**A:** 
- 确保双方都添加了对方为好友
- 检查浏览器本地存储是否启用
- 清除缓存后重试

### Q5: 如何删除好友？
**A:** 
- 目前版本暂不支持删除好友
- 功能开发中，即将推出

---

## 📱 移动端使用

### 手机浏览器
1. 直接在手机浏览器打开网页
2. 添加到主屏幕（PWA支持）
3. 像原生应用一样使用

### 添加到主屏幕（iOS）
1. Safari浏览器打开网页
2. 点击底部"分享"按钮
3. 选择"添加到主屏幕"
4. 点击"添加"

### 添加到主屏幕（Android）
1. Chrome浏览器打开网页
2. 点击右上角菜单
3. 选择"添加到主屏幕"
4. 点击"添加"

---

## 🎯 使用技巧

### 技巧1：快速定位
- 按键盘 `Ctrl+S` 切换到上海位置
- 按键盘 `Ctrl+D` 显示调试信息
- 长按GPS信息区域查看详细信息

### 技巧2：高效寻宝
- 先查看地图上所有宝藏
- 规划最优路线
- 一次性收集多个宝藏

### 技巧3：社交互动
- 将你的ID发到群聊
- 邀请更多朋友加入
- 组队寻宝更有趣

### 技巧4：数据备份
- 定期截图保存你的ID
- 记录重要好友的ID
- 防止清除缓存后数据丢失

---

## 🚀 进阶功能

### 商家功能（需要登录）
1. 点击"🏪 商家入口"
2. 使用测试账号登录：
   - 用户名：`merchant1`
   - 密码：`password123`
3. 创建任务、查看数据、管理用户

### 放置宝藏
1. 点击"🎁 放置宝藏"按钮
2. 选择宝藏类型
3. 设置奖励和描述
4. 确认放置

---

## 📊 数据说明

### 本地存储
- 所有数据保存在浏览器本地
- 不会上传到服务器
- 清除浏览器数据会丢失

### 数据包括
- 用户信息（昵称、头像、ID）
- 好友列表
- 聊天记录
- 发现的宝藏
- 游戏进度

---

## 🎉 开始使用

**现在就打开 `index.html` 开始你的寻宝之旅吧！**

1. 双击打开文件
2. 或拖到浏览器窗口
3. 或右键 → 打开方式 → 浏览器

**祝你玩得开心！🎊**

---

## 📞 技术支持

- 查看项目文档：`README.md`
- 添加好友指南：`添加好友使用指南.md`
- Firebase配置：`Firebase配置-5分钟快速版.md`
- 手机测试：`手机测试步骤.md`

---

**TotoFun 突突翻 - 让寻宝更有趣！** 🎮✨

