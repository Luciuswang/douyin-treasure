# 🗺️ Totofun 突突翻 - 基于高德地图的GPS寻宝游戏

一个创新的基于地理位置的寻宝游戏，使用高德地图API实现真实世界的虚拟寻宝体验。探索身边的宝藏，开启寻宝之旅！

## 🎮 游戏特色

- **🗺️ 真实地图** - 基于高德地图API的高精度地图服务
- **📍 精确定位** - 使用GPS定位获取用户真实位置
- **🎯 随机宝藏** - 在用户周围随机生成各种类型的虚拟宝藏
- **💰 奖励系统** - 发现宝藏获得金币，解锁更多功能
- **🏆 等级系统** - 通过寻宝提升探险等级
- **📱 移动优化** - 完全适配手机端，支持触摸操作

## 🚀 快速开始

### 1. 获取高德地图API Key

1. 访问 [高德开放平台](https://lbs.amap.com/)
2. 注册账号并完成实名认证
3. 创建应用，选择"Web端(JS API)"
4. 获取API Key

### 2. 配置游戏

1. 打开游戏页面
2. 在API配置区域输入你的高德地图API Key
3. 点击"🚀 启动寻宝之旅"
4. 允许浏览器获取位置权限
5. 开始你的寻宝之旅！

### 3. ⚠️ 重要说明

#### GPS定位修复（2024-10-16更新）
- ✅ **已修复坐标系转换问题**：自动将GPS的WGS84坐标转换为高德地图的GCJ-02坐标
- ✅ **优化定位策略**：先尝试高精度定位，失败后自动降级为普通精度
- ✅ **改进标记显示**：用户位置标记现在准确显示在地图上
- ✅ **新增功能**："回到我的位置"按钮，快速定位到当前位置

#### 测试工具
- 使用 `test-coordinate-conversion.html` 测试坐标转换是否正常
- 查看 `GPS_FIX_NOTES.md` 了解详细的修复说明

## 🎯 游戏玩法

### 基础操作
- **📍 获取当前位置** - 定位到你的真实位置
- **🎯 生成随机宝藏** - 在周围1公里范围内生成3-7个宝藏
- **➕ 在当前位置放置宝藏** - 在你的位置手动放置宝藏
- **🔍 查看所有宝藏** - 调整地图视角显示所有宝藏
- **🗑️ 清空所有宝藏** - 重新开始游戏

### 宝藏类型
- 💎 **钻石** - 奖励100金币
- 👑 **皇冠** - 奖励200金币  
- 💰 **金币** - 奖励50金币
- 💍 **宝石** - 奖励150金币
- 🎁 **礼品** - 奖励75金币
- ⚔️ **神器** - 奖励300金币
- 🏆 **奖杯** - 奖励250金币

### 升级系统
- 每发现3个宝藏升1级
- 等级越高，解锁更多功能

## 🛠️ 技术特性

- **高德地图API 2.0** - 最新版本的地图服务
- **响应式设计** - 自适应各种屏幕尺寸
- **本地存储** - 自动保存API Key和游戏进度
- **实时通知** - 美观的消息提示系统
- **3D地图视角** - 支持3D视图和倾斜角度

## 📱 移动端支持

游戏完全支持移动设备：
- ✅ iOS Safari
- ✅ Android Chrome
- ✅ 微信内置浏览器
- ✅ 支付宝内置浏览器

## 🌐 在线演示

### 🚀 GitHub Pages部署
[点击这里体验游戏](https://your-username.github.io/totofun-treasure/)

### 📱 移动端测试
1. 用手机浏览器访问上述链接
2. 允许位置权限获得最佳GPS体验
3. 建议在户外或窗边测试GPS定位

## 📦 部署到GitHub Pages

### 快速部署
1. Fork这个仓库到你的GitHub账号
2. 在仓库设置(Settings)中找到Pages选项
3. Source选择"Deploy from a branch"
4. Branch选择"main"或"master"，文件夹选择"/ (root)"
5. 点击Save，等待几分钟即可访问: `https://your-username.github.io/totofun-treasure/`

### 自定义域名（可选）
1. 在仓库根目录的CNAME文件中设置你的域名
2. 在你的域名DNS设置中添加CNAME记录指向: `your-username.github.io`
3. 在GitHub Pages设置中输入你的自定义域名

## 🔧 本地开发

```bash
# 克隆仓库
git clone https://github.com/your-username/totofun-treasure.git

# 进入目录
cd totofun-treasure

# 直接打开HTML文件或使用本地服务器
python -m http.server 8000
# 或
npx serve .
```

## 📄 文件说明

### 核心文件
- `index.html` - **主游戏文件**，包含完整的寻宝游戏功能
- `package.json` - 项目配置和依赖
- `README.md` - 项目说明文档

### 测试和调试文件
- `test-gps.html` - GPS定位测试工具
- `amap-treasure.html` - 高德地图版游戏原型
- `simple-map.html` - 简化版地图（调试用）
- `debug-location.html` - 位置调试工具

### 部署配置文件
- `.nojekyll` - 禁用Jekyll，确保GitHub Pages正常运行
- `CNAME` - 自定义域名配置（可选）

### 服务器文件（可选）
- `server/` - Node.js后端服务器（用于高级功能）
  - `index.js` - 服务器主文件
  - `models/` - 数据模型
  - `routes/` - API路由
  - `middleware/` - 中间件

## ⚡ 快速开始

### 方法一：GitHub Pages在线访问
1. 访问已部署的在线版本（推荐）
2. 直接在浏览器中使用，无需下载

### 方法二：本地运行
1. 下载项目文件
2. 双击 `index.html` 直接在浏览器中打开
3. 或使用本地服务器：`npx serve .`

## 🤝 贡献

欢迎提交Issue和Pull Request！

## 📜 许可证

MIT License

## 📞 联系方式

如有问题，请创建Issue或发送邮件。

---

🎉 **开始你的寻宝冒险吧！**