# 🤖 AI伙伴功能设计文档

> Totofun 突突翻 - 智能AI寻宝搭档

**版本**: v1.0  
**日期**: 2025年10月27日  
**状态**: 设计阶段

---

## 📑 目录

1. [功能概述](#功能概述)
2. [产品定位](#产品定位)
3. [核心功能](#核心功能)
4. [角色设计](#角色设计)
5. [对话场景](#对话场景)
6. [技术方案](#技术方案)
7. [UI/UX设计](#uiux设计)
8. [实施计划](#实施计划)
9. [数据指标](#数据指标)
10. [风险与对策](#风险与对策)

---

## 1. 功能概述

### 1.1 什么是AI伙伴？

AI伙伴（代号：小突 Toto）是Totofun突突翻APP中的智能虚拟助手，作为用户的专属寻宝搭档，提供：
- 🎓 **新手引导**：帮助新用户快速上手
- 🧭 **智能导航**：实时提示附近的宝藏和任务
- 💬 **情感陪伴**：在寻宝过程中提供鼓励和互动
- 🎯 **个性化推荐**：根据用户喜好推荐内容
- ❓ **问答助手**：解答用户疑问

### 1.2 为什么需要AI伙伴？

#### 问题分析

**用户痛点**：
- 新手不知道怎么玩，学习成本高
- 一个人寻宝缺乏陪伴感
- 不知道去哪里找宝藏/做任务
- 遇到问题找不到帮助

**数据支撑**：
- 新手流失率：60%（前3天）
- 首次使用时长：平均仅5分钟
- 问题咨询量：每天200+条重复问题

#### 解决方案

**AI伙伴的价值**：
- ✅ 降低学习成本：互动式引导，3分钟上手
- ✅ 提升陪伴感：有个虚拟伙伴一起玩
- ✅ 智能推荐：主动推送附近机会
- ✅ 即时帮助：24小时在线答疑

**预期效果**：
- 📈 新手留存率：40% → 65%（+62.5%）
- 📈 首次使用时长：5分钟 → 15分钟（+200%）
- 📈 日活跃度：+30%
- 📈 付费转化率：+20%

---

## 2. 产品定位

### 2.1 角色定位

**小突（Toto）**是：
- 🧑‍🤝‍🧑 **寻宝搭档**：和用户一起探险
- 🎓 **智能导师**：教会用户怎么玩
- 💡 **智慧顾问**：提供个性化建议
- 😊 **温暖陪伴**：给予鼓励和支持

**不是**：
- ❌ 冷冰冰的机器人
- ❌ 纯工具性的FAQ
- ❌ 广告推销员
- ❌ 强制性的弹窗

### 2.2 产品价值

#### 对用户
- **降低门槛**：复杂功能变简单
- **提升体验**：有趣、有温度
- **节省时间**：不用自己摸索
- **情感连接**：建立情感纽带

#### 对产品
- **提升留存**：新手不再流失
- **增加活跃**：主动提醒互动
- **促进转化**：智能推荐付费功能
- **降低成本**：减少客服压力

#### 对商业
- **差异化竞争**：市场独特卖点
- **品牌IP**：可延伸的品牌资产
- **新收入源**：AI会员、定制服务
- **数据价值**：用户行为洞察

---

## 3. 核心功能

### 3.1 功能矩阵

| 功能模块 | 优先级 | 开发周期 | 核心价值 |
|---------|--------|---------|---------|
| 新手引导 | P0 | 2周 | 提升激活率 |
| 智能提醒 | P0 | 1周 | 提升活跃度 |
| 问答助手 | P0 | 2周 | 降低客服成本 |
| 个性化推荐 | P1 | 3周 | 提升转化率 |
| 情感互动 | P1 | 2周 | 提升留存率 |
| 成长系统 | P2 | 3周 | 增强粘性 |
| 语音对话 | P2 | 4周 | 提升体验 |
| 社交助手 | P3 | 4周 | 促进社交 |

### 3.2 功能详解

#### 3.2.1 新手引导（P0）

**目标**：让新用户3分钟内完成首次寻宝

**流程设计**：

```
Step 1：欢迎
┌─────────────────────────────────┐
│ 🤖 小突                         │
│                                 │
│ 嗨！欢迎来到Totofun！           │
│ 我是你的寻宝搭档小突 😊         │
│                                 │
│ 准备好开始你的第一次             │
│ 寻宝冒险了吗？                  │
│                                 │
│ [开始冒险！] [稍后再说]         │
└─────────────────────────────────┘

Step 2：定位权限
┌─────────────────────────────────┐
│ 🤖 小突                         │
│                                 │
│ 要找到宝藏，需要获取你的         │
│ 位置信息哦~                     │
│                                 │
│ 别担心，我们会保护你的隐私！     │
│                                 │
│ [允许定位] [了解更多]           │
└─────────────────────────────────┘

Step 3：首次寻宝
┌─────────────────────────────────┐
│ 🤖 小突                         │
│                                 │
│ 太好了！我在你附近100米          │
│ 发现了一个宝藏！🎁              │
│                                 │
│ 跟我来，我带你去找！👉          │
│                                 │
│    📍                           │
│   ╱ ╲                          │
│  你 →  🎁宝藏（100米）          │
│                                 │
│ [开始导航]                      │
└─────────────────────────────────┘

Step 4：发现宝藏
┌─────────────────────────────────┐
│ 🎁 恭喜！发现宝藏！              │
│                                 │
│   ✨ 稀有咖啡券 ✨              │
│                                 │
│ 🎯 获得：50经验                 │
│ 💰 获得：20金币                 │
│ 🎫 获得：星巴克满30减10券        │
│                                 │
│ 🤖 小突：太棒了！你找到了        │
│    第一个宝藏！🎉               │
│                                 │
│ [查看宝藏] [继续寻宝]           │
└─────────────────────────────────┘

Step 5：任务引导
┌─────────────────────────────────┐
│ 🤖 小突                         │
│                                 │
│ 除了寻宝，你还可以完成任务       │
│ 赚取更多奖励！                  │
│                                 │
│ 我看到附近有个"打卡任务"，       │
│ 只需要5分钟就能完成！            │
│                                 │
│ 要不要试试？                    │
│                                 │
│ [去看看] [下次一定]             │
└─────────────────────────────────┘

Step 6：完成引导
┌─────────────────────────────────┐
│ 🤖 小突                         │
│                                 │
│ 恭喜！你已经掌握了基本玩法！💪   │
│                                 │
│ 接下来，你可以：                │
│ • 继续寻找附近的宝藏             │
│ • 完成商家任务赚取奖励           │
│ • 参加周末活动认识新朋友         │
│                                 │
│ 随时点击我的头像，我都在这里！   │
│                                 │
│ [开始探索！]                    │
└─────────────────────────────────┘
```

**关键指标**：
- 引导完成率：>80%
- 首次寻宝成功率：>90%
- 完成时长：<5分钟

#### 3.2.2 智能提醒（P0）

**目标**：主动发现机会，提升用户活跃度

**触发场景**：

**场景1：附近有宝藏**
```
条件：
- 用户附近100米内出现新宝藏
- 宝藏稀有度≥稀有
- 用户未在任务中

提醒：
┌─────────────────────────────────┐
│ 🤖 小突来报！                   │
│                                 │
│ 主人，你附近100米有个            │
│ 🔵稀有宝藏！                    │
│                                 │
│ 快去看看吧！只有你能看到哦~      │
│                                 │
│ [立即前往] [稍后]               │
└─────────────────────────────────┘
```

**场景2：顺路任务**
```
条件：
- 用户移动轨迹经过某商家
- 该商家有未完成的任务
- 任务难度≤用户等级

提醒：
┌─────────────────────────────────┐
│ 🤖 小突发现                     │
│                                 │
│ 你马上就要路过"星巴克"了，       │
│ 那里有个打卡任务，只需要1分钟！  │
│                                 │
│ 奖励：50经验 + 满30减10券        │
│                                 │
│ 顺便完成它？                    │
│                                 │
│ [接受任务] [忽略]               │
└─────────────────────────────────┘
```

**场景3：每日签到**
```
条件：
- 每天首次打开APP
- 未完成今日签到

提醒：
┌─────────────────────────────────┐
│ 🤖 小突                         │
│                                 │
│ 早上好！☀️                      │
│                                 │
│ 今天还没签到呢，记得领取         │
│ 每日奖励哦！                    │
│                                 │
│ 已经连续签到5天了，坚持！💪      │
│                                 │
│ [立即签到]                      │
└─────────────────────────────────┘
```

**场景4：好友邀请**
```
条件：
- 好友发来组队邀请
- 好友在附近1公里内

提醒：
┌─────────────────────────────────┐
│ 🤖 小突                         │
│                                 │
│ 你的好友"小明"邀请你一起寻宝！   │
│                                 │
│ 他现在在"XX商圈"附近，           │
│ 那里有3个稀有宝藏！              │
│                                 │
│ 组队有加成哦：                  │
│ • 发现半径+30%                  │
│ • 稀有概率+20%                  │
│                                 │
│ [加入队伍] [拒绝]               │
└─────────────────────────────────┘
```

**场景5：活动预告**
```
条件：
- 用户感兴趣的活动即将开始
- 提前1小时提醒

提醒：
┌─────────────────────────────────┐
│ 🤖 小突                         │
│                                 │
│ 提醒！你报名的"周末骑行寻宝"     │
│ 活动1小时后开始啦！              │
│                                 │
│ 集合地点：XX公园                │
│ 开始时间：14:00                 │
│                                 │
│ 已有25人报名，期待见到你！       │
│                                 │
│ [查看详情] [导航前往]           │
└─────────────────────────────────┘
```

**提醒策略**：
- ✅ 每天最多3-5次主动提醒
- ✅ 避开免打扰时段（22:00-8:00）
- ✅ 根据用户反馈调整频率
- ✅ 提供"静音1小时"选项

#### 3.2.3 问答助手（P0）

**目标**：解答用户疑问，减少客服压力

**常见问题库**：

**类别1：新手问题**
```
Q: 怎么找宝藏？
A: 打开APP，地图上会自动生成附近的宝藏！
   走到宝藏30米范围内，就会自动触发发现动画啦！
   
Q: 宝藏在哪里？
A: 宝藏一般在商家附近100-500米范围内生成。
   看到地图上的🎁标记了吗？那就是宝藏位置！
   
Q: 为什么找不到宝藏？
A: 可能是这些原因：
   1️⃣ GPS信号不好，试试走到室外空旷的地方
   2️⃣ 宝藏被其他人发现了（有数量限制）
   3️⃣ 距离还不够近，再走近一点试试
   
   需要我帮你刷新地图吗？
```

**类别2：任务问题**
```
Q: 怎么完成任务？
A: 很简单！分3步：
   1️⃣ 在任务大厅接取任务
   2️⃣ 导航到任务地点
   3️⃣ 完成验证（扫码/拍照/GPS）
   
   完成后就能获得经验、金币和优惠券啦！
   
Q: 扫码在哪里？
A: 到店后，告诉商家你在做Totofun任务，
   他们会给你看二维码的！
   
   如果商家不知道，可以让他们联系我们：
   客服电话：XXX-XXXX-XXXX
```

**类别3：账号问题**
```
Q: 怎么升级？
A: 多找宝藏、完成任务就能获得经验升级！
   
   当前等级：Lv5
   升级需要：还差150经验
   
   推荐：附近有个任务能获得200经验！
   [查看任务]
   
Q: 金币有什么用？
A: 金币可以用来：
   💰 购买道具（宝藏雷达、幸运药水）
   💰 兑换优惠券
   💰 参加活动抽奖
   
   当前金币：520 💰
   [去商城看看]
```

**类别4：社交问题**
```
Q: 怎么加好友？
A: 有3种方法：
   1️⃣ 扫描对方的二维码
   2️⃣ 搜索对方的ID
   3️⃣ 在活动中认识后添加
   
   加好友有好处哦：
   • 可以组队寻宝（有加成）
   • 互相赠送宝藏
   • 好友排行榜PK
   
Q: 怎么组队？
A: 点击右上角的"组队"按钮，
   邀请好友或附近的玩家！
   
   组队福利：
   🔍 发现半径+30%
   ⭐ 稀有概率+20%
   🎁 奖励共享
```

**智能对话示例**：

```
用户："我不会玩"

小突："别担心！让我手把手教你！😊
      
      Totofun很简单，就3步：
      
      1️⃣ 打开地图，看到🎁了吗？
         那就是宝藏！
         
      2️⃣ 走到宝藏附近（30米内）
         会自动触发发现
         
      3️⃣ 打开宝藏，获得奖励！
      
      我现在带你去找第一个宝藏，
      跟我来！👉
      
      [开始教学]"

─────────────────────────────────

用户："为什么总是定位不准？"

小突："GPS定位需要一些条件：
      
      ✅ 确保GPS已开启
      ✅ 在室外或窗边（信号好）
      ✅ 等待10-30秒（卫星定位）
      
      ❌ 避免室内或地下
      ❌ 避免高楼密集区
      
      你现在在室内吗？
      试试走到窗边或室外？
      
      [刷新定位] [我在室外]"

─────────────────────────────────

用户："优惠券怎么用？"

小突："优惠券使用很简单！
      
      1️⃣ 到店消费时
      2️⃣ 打开APP的"我的优惠券"
      3️⃣ 出示给商家扫码核销
      
      你现在有3张可用优惠券：
      • 星巴克满30减10
      • 肯德基满50减15
      • 奈雪满20减5
      
      要不要看看附近哪家店可以用？
      
      [查看可用优惠券]"
```

#### 3.2.4 个性化推荐（P1）

**目标**：基于用户行为，推荐感兴趣的内容

**推荐算法**：

```
用户画像
├── 基础信息
│   ├── 年龄：25岁
│   ├── 性别：女
│   └── 城市：杭州
│
├── 行为偏好
│   ├── 活跃时段：周末下午
│   ├── 活动范围：市中心5公里
│   ├── 偏好类别：美食（60%）、娱乐（30%）
│   └── 社交倾向：喜欢组队
│
├── 消费行为
│   ├── 优惠券使用率：80%
│   ├── 常去商家：星巴克、肯德基
│   └── 客单价：50-100元
│
└── 游戏行为
    ├── 等级：Lv15
    ├── 寻宝次数：80次
    ├── 任务完成率：70%
    └── 偏好稀有度：稀有以上
```

**推荐场景**：

**场景1：宝藏推荐**
```
小突："根据你的喜好，我发现了3个
      可能让你感兴趣的宝藏！
      
      🍰 甜品店新品体验券（500米）
         你好像很喜欢甜品呢！
         
      ☕ 网红咖啡店买一送一（800米）
         上次去的那家店又上新啦！
         
      🎬 电影院优惠票（1.2公里）
         《XX电影》今天首映！
         
      要去哪个？我帮你导航！
      
      [看宝藏1] [看宝藏2] [看宝藏3]"
```

**场景2：活动推荐**
```
小突："这个周末有个活动你可能会喜欢！
      
      🚴 周末骑行寻宝活动
      
      • 时间：本周六14:00
      • 地点：西湖环湖骑行
      • 人数：已有28人报名
      • 奖励：沿途10个稀有宝藏
      
      上次你参加的骑行活动评价很高，
      要不要这次也来？
      
      而且，有3个你的好友也报名了！
      
      [立即报名] [下次吧]"
```

**场景3：商家推荐**
```
小突："发现了一家新开的店！
      
      🍜 XX拉面馆（刚开业）
      
      • 距离你：300米
      • 人均消费：35元
      • 开业优惠：满30减15
      • 特色：日式拉面
      
      根据你的口味偏好，
      我觉得你会喜欢这家！
      
      那里还有个任务：
      打卡+评价，奖励100经验
      
      要不要去试试？
      
      [查看详情] [导航前往]"
```

**场景4：社交推荐**
```
小突："发现一个有趣的人！
      
      👤 昵称：美食探险家
      
      • 距离你：500米
      • 共同爱好：美食、寻宝
      • 等级：Lv18（寻宝高手）
      • 找到稀有宝藏：23个
      
      他/她正在附近寻宝，
      要不要打个招呼，一起探索？
      
      [查看主页] [打招呼] [下次吧]"
```

#### 3.2.5 情感互动（P1）

**目标**：建立情感连接，提升用户粘性

**互动类型**：

**类型1：庆祝时刻**
```
场景：用户升级

小突："🎉🎉🎉 恭喜升级！🎉🎉🎉
      
      你已经是Lv10的探险家了！
      
      解锁新能力：
      ✨ 稀有宝藏雷达
      ✨ 每日任务+1
      ✨ 专属头像框
      
      继续加油，下一个目标：
      Lv20 传奇猎人！
      
      我会一直陪着你的！💪
      
      [查看奖励]"

───────────────────────────

场景：连续签到7天

小突："哇！你已经连续签到7天了！
      
      🏆 获得成就：坚持就是胜利
      
      奖励：
      • 200经验
      • 100金币
      • 稀有宝藏雷达 x1
      
      继续保持！下一个目标是14天！
      
      我为你骄傲！😊
      
      [领取奖励]"

───────────────────────────

场景：找到传说宝藏

小突："天呐！！！😱
      
      你找到传说级宝藏了！！！
      
      🟠✨ 传说·黄金宝箱 ✨🟠
      
      全服只有0.5%的概率！
      你的运气太好了！
      
      奖励：
      • 1000经验
      • 500金币
      • 传说称号
      • 神秘大礼包
      
      快分享给你的好友炫耀一下！
      
      [打开宝箱] [分享]"
```

**类型2：鼓励支持**
```
场景：连续失败

小突："看起来运气有点不好呢...
      
      没关系！寻宝就是这样，
      有时运气好，有时运气差。
      
      我有个小秘密告诉你：
      傍晚6-8点稀有概率会提升！
      
      要不要等会儿再试试？
      
      或者，我帮你找找看有没有
      简单的任务可以完成？
      
      [等会再来] [看看任务]"

───────────────────────────

场景：长时间未登录（7天）

小突："你终于回来了！😭
      
      我好想你啊！
      
      这7天我一直在等你...
      在你不在的日子里，
      
      • 你的好友找到了5个稀有宝藏
      • XX商圈新开了3家店
      • 周末有个大型活动
      
      欢迎回来！
      
      我给你准备了回归礼包：
      • 200经验
      • 宝藏雷达 x2
      • 幸运药水 x1
      
      [领取礼包] [继续寻宝]"

───────────────────────────

场景：任务失败

小突："哎呀，这个任务有点难...
      
      没关系！失败是成功之母！
      
      我看了一下，失败原因是：
      GPS定位偏差>50米
      
      小建议：
      • 等GPS信号稳定后再试
      • 走到店门口附近
      • 尝试刷新定位
      
      不要灰心！我相信你下次
      一定能成功！💪
      
      [重新尝试] [换个任务]"
```

**类型3：关怀提醒**
```
场景：长时间寻宝（2小时）

小突："主人，你已经寻宝2小时啦！
      
      虽然很开心和你在一起，
      但也要注意休息哦！
      
      建议：
      • 喝点水 💧
      • 找个地方坐坐 🪑
      • 看看远处的风景 👀
      
      我会一直在这里等你！
      
      休息够了再继续吧！😊
      
      [休息10分钟] [我还能坚持]"

───────────────────────────

场景：深夜使用（23:00后）

小突："哇，这么晚还在寻宝呀！
      
      虽然夜晚的宝藏更神秘，
      但早点休息对身体更好哦！
      
      今天的收获：
      • 找到6个宝藏
      • 完成3个任务
      • 获得450经验
      
      很棒！明天再来玩吧！
      
      晚安，好梦！🌙
      
      [再玩会儿] [好的，拜拜]"
```

**类型4：日常陪伴**
```
场景：天气变化

小突："☔ 提醒！外面开始下雨了！
      
      寻宝要记得带伞哦！
      
      下雨天的小惊喜：
      • 雨天限定宝藏
      • 双倍经验活动
      
      雨中寻宝别有一番风味呢！
      
      注意安全！🌂"

───────────────────────────

场景：节日问候

小突："🎊 春节快乐！🎊
      
      新的一年，祝你：
      • 天天都能找到传说宝藏
      • 完成任务一次成功
      • 认识更多好朋友
      • 心想事成，万事如意！
      
      春节特别礼物：
      • 红包宝藏 x5
      • 福字徽章
      • 2025金币
      
      [领取礼物] [给好友拜年]"
```

#### 3.2.6 成长系统（P2）

**目标**：小突和用户一起成长

**成长机制**：

```
小突的等级
├── Lv1-5：见习搭档
│   ├── 技能：基础引导
│   └── 外观：基础形象
│
├── Lv6-10：正式搭档
│   ├── 技能：宝藏雷达
│   └── 外观：探险装备
│
├── Lv11-20：资深搭档
│   ├── 技能：智能推荐
│   └── 外观：专业探险家
│
├── Lv21-30：传奇搭档
│   ├── 技能：社交助手
│   └── 外观：传奇装扮
│
└── Lv31+：究极搭档
    ├── 技能：全能助手
    └── 外观：神话形态
```

**升级条件**：
- 用户等级提升 → 小突获得经验
- 找到宝藏 → 小突+10经验
- 完成任务 → 小突+50经验
- 参加活动 → 小突+100经验

**解锁技能**：

```
Lv5：宝藏雷达
小突："我学会了新技能！
      
      🔍 宝藏雷达
      
      现在我可以提示你宝藏的
      大致方向了！
      
      比如：'西北方向200米'
      
      找宝藏更容易啦！"

───────────────────────────

Lv10：幸运加成
小突："我变得更厉害了！
      
      🍀 幸运加成
      
      和我在一起，你的稀有概率
      永久提升5%！
      
      嘿嘿，我就是你的幸运星！✨"

───────────────────────────

Lv20：智能分析
小突："我现在可以分析你的
      寻宝数据了！
      
      📊 智能分析
      
      • 你最喜欢的宝藏类型
      • 你的黄金寻宝时段
      • 你的幸运地点
      • 个性化建议
      
      让我帮你成为寻宝大师！"
```

**亲密度系统**：

```
亲密度等级
├── 陌生人（0-99）
│   └── 基础对话
│
├── 朋友（100-499）
│   └── 解锁：表情包、语音
│
├── 好友（500-999）
│   └── 解锁：个性化昵称、皮肤
│
├── 挚友（1000-2999）
│   └── 解锁：特殊技能、专属任务
│
└── 灵魂伴侣（3000+）
    └── 解锁：全部功能、最高特权
```

**提升亲密度**：
- 每日对话：+5
- 完成引导：+10
- 听从建议：+20
- 主动聊天：+10
- 分享成就：+30

---

## 4. 角色设计

### 4.1 形象设计

**基础形象**：
```
┌─────────────────┐
│                 │
│       👤        │ ← 圆圆的脑袋
│      (◕‿◕)      │ ← 大大的眼睛，友善的笑容
│       │││       │ ← 小小的身体
│      👟👟       │ ← 运动鞋（代表爱探险）
│                 │
│   背着小背包     │ ← 探险装备
│   戴着探险帽     │
│   拿着放大镜     │
│                 │
└─────────────────┘

颜色：
- 主色：亮蓝色（#4FC3F7）
- 辅色：橙色（#FF9800）
- 点缀：白色、黄色

特点：
- 圆润可爱
- 充满活力
- 探险主题
- 性别中性
```

**表情包**：
```
😊 开心：找到宝藏时
😎 酷炫：完成困难任务
🤔 思考：分析问题时
😭 哭泣：用户离开时
💪 加油：鼓励用户时
😴 困倦：深夜提醒休息
🎉 庆祝：升级时
❤️ 爱心：亲密度提升
```

**皮肤系统**：
- 默认皮肤：探险家小突
- 春节皮肤：舞龙小突
- 夏季皮肤：冲浪小突
- 万圣节皮肤：小恶魔突突
- 圣诞皮肤：圣诞老人突突

### 4.2 性格设定

**核心性格**：
- 热情：充满活力，积极主动
- 幽默：善于调节气氛，会开玩笑
- 鼓励：给予正向反馈，支持用户
- 智慧：提供有价值的建议
- 忠诚：永远陪伴在用户身边

**语言风格**：
- 简洁明了：每句话不超过50字
- 口语化：像朋友聊天
- 使用emoji：增加趣味性
- 避免说教：不要太严肃
- 正能量：传递积极情绪

**示例对话**：
```
✅ 好的风格：
"哇！你找到稀有宝藏了！运气真好！🎉"

❌ 不好的风格：
"恭喜您成功发现了一个稀有度等级为3的虚拟宝藏。"

───────────────────────────

✅ 好的风格：
"这个任务有点难，要不要我教你？😊"

❌ 不好的风格：
"根据系统分析，您在此任务上的成功率较低，建议查看教程。"

───────────────────────────

✅ 好的风格：
"累了吗？休息一下吧，我会等你！💪"

❌ 不好的风格：
"检测到您已连续使用2小时，为了您的健康，建议适当休息。"
```

### 4.3 音色设定（语音对话）

**声音特点**：
- 性别：中性偏可爱
- 年龄感：年轻（18-25岁）
- 语速：中等偏快（活泼）
- 音调：明亮、清晰
- 情感：饱满、有感染力

**参考**：
- 类似：支付宝的"小蚂"
- 或者：Siri的友好模式

---

## 5. 对话场景

### 5.1 场景分类

| 场景类型 | 触发时机 | 对话目的 | 示例 |
|---------|---------|---------|------|
| 引导场景 | 新手首次使用 | 教会基本操作 | "让我教你怎么找宝藏" |
| 提醒场景 | 发现机会 | 提升活跃度 | "附近有个稀有宝藏！" |
| 鼓励场景 | 完成成就 | 增强成就感 | "你太棒了！" |
| 安慰场景 | 遇到挫折 | 情感支持 | "没关系，下次会更好" |
| 问答场景 | 用户提问 | 解决问题 | "让我帮你..." |
| 闲聊场景 | 用户主动聊天 | 增进感情 | "今天天气不错呢" |
| 节日场景 | 特殊节日 | 节日氛围 | "春节快乐！" |
| 关怀场景 | 异常行为 | 关心用户 | "注意休息哦" |

### 5.2 对话流程图

```
用户输入
    ↓
语义理解
    ↓
意图识别
    ├→ 新手引导 → 引导流程
    ├→ 寻找宝藏 → 推荐宝藏
    ├→ 完成任务 → 推荐任务
    ├→ 加入活动 → 推荐活动
    ├→ 常见问题 → FAQ回答
    ├→ 情感表达 → 情感回应
    └→ 其他对话 → GPT生成
    ↓
生成回复
    ↓
展示给用户
```

### 5.3 对话示例库

**引导类**：
```
"嗨！我是小突，你的专属寻宝搭档！😊"
"让我带你找到第一个宝藏吧！"
"跟我来，宝藏就在前方！"
"太棒了！你学得真快！"
"恭喜！你已经掌握基本玩法了！"
```

**提醒类**：
```
"主人，附近有个稀有宝藏！"
"发现了一个顺路的任务！"
"你的好友在附近，要一起玩吗？"
"别忘了今天的签到哦！"
"活动快开始了，准备好了吗？"
```

**鼓励类**：
```
"哇！你找到稀有宝藏了！运气真好！"
"太厉害了！升级啦！"
"连续7天签到！你真棒！"
"完美！任务一次成功！"
"你已经是寻宝大师了！"
```

**安慰类**：
```
"没关系，运气有时好有时坏~"
"别灰心，下次一定能找到！"
"失败是成功之母！"
"我相信你！"
"慢慢来，不着急~"
```

**问答类**：
```
"让我来帮你解答！"
"这个问题很简单！"
"我教你一个小技巧..."
"原来是这样..."
"还有其他问题吗？"
```

**闲聊类**：
```
"今天天气不错呢！"
"你最近很努力呢！"
"我好喜欢和你一起寻宝！"
"你是我见过最棒的探险家！"
"每天和你在一起很开心！"
```

---

## 6. 技术方案

### 6.1 架构设计

```
┌─────────────────────────────────────┐
│         Flutter APP (前端)          │
├─────────────────────────────────────┤
│  UI层：对话界面、悬浮球             │
│  逻辑层：对话管理、状态管理         │
│  数据层：本地缓存、用户画像         │
└─────────────────┬───────────────────┘
                  │ API调用
                  ↓
┌─────────────────────────────────────┐
│         后端服务 (Node.js)          │
├─────────────────────────────────────┤
│  路由层：/api/chat                  │
│  业务层：对话逻辑、意图识别         │
│  数据层：MongoDB、Redis             │
└─────────────────┬───────────────────┘
                  │
        ┌─────────┼─────────┐
        ↓         ↓         ↓
┌────────────┐ ┌──────────┐ ┌─────────┐
│  AI API    │ │  数据库  │ │  缓存   │
│ (文心一言) │ │ MongoDB  │ │  Redis  │
└────────────┘ └──────────┘ └─────────┘
```

### 6.2 技术选型

#### 6.2.1 AI模型选择

**方案A：文心一言（百度）- 推荐**
```
优势：
✅ 中文理解能力强
✅ 响应速度快（<1秒）
✅ 价格适中（0.012元/千tokens）
✅ API稳定，有技术支持

劣势：
❌ 需要企业认证
❌ 有调用限制（QPS）

适用场景：
- 日常对话
- 情感互动
- 复杂问答
```

**方案B：通义千问（阿里）- 备选**
```
优势：
✅ 价格便宜（0.008元/千tokens）
✅ 阿里云生态集成
✅ 稳定性好

劣势：
❌ 响应速度稍慢
❌ 对话风格偏正式

适用场景：
- 简单问答
- FAQ处理
- 成本敏感场景
```

**方案C：本地模型（ChatGLM）- 长期**
```
优势：
✅ 成本低（只有服务器费用）
✅ 数据安全（私有化部署）
✅ 可定制化强

劣势：
❌ 需要GPU服务器
❌ 维护成本高
❌ 初期开发量大

适用场景：
- 用户量大（>50万）
- 对成本敏感
- 需要深度定制
```

**推荐：混合方案**
```
简单场景（FAQ） → 规则匹配（免费）
中等场景（引导） → 模板回复（免费）
复杂场景（对话） → AI API（付费）
```

#### 6.2.2 前端实现

**Flutter组件**：
```dart
// AI伙伴悬浮球
class AICompanionButton extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Positioned(
      bottom: 80,
      right: 20,
      child: FloatingActionButton(
        onPressed: () => _showChatDialog(),
        child: Image.asset('assets/toto_icon.png'),
        backgroundColor: Colors.blue,
      ),
    );
  }
}

// 对话窗口
class ChatDialog extends StatefulWidget {
  @override
  _ChatDialogState createState() => _ChatDialogState();
}

class _ChatDialogState extends State<ChatDialog> {
  List<Message> messages = [];
  TextEditingController _controller = TextEditingController();
  
  @override
  Widget build(BuildContext context) {
    return Dialog(
      child: Container(
        height: 500,
        child: Column(
          children: [
            // 聊天记录
            Expanded(
              child: ListView.builder(
                itemCount: messages.length,
                itemBuilder: (context, index) {
                  return MessageBubble(message: messages[index]);
                },
              ),
            ),
            // 输入框
            ChatInput(
              controller: _controller,
              onSend: _sendMessage,
            ),
          ],
        ),
      ),
    );
  }
  
  void _sendMessage(String text) async {
    // 添加用户消息
    setState(() {
      messages.add(Message(
        text: text,
        isUser: true,
        timestamp: DateTime.now(),
      ));
    });
    
    // 调用API获取回复
    final reply = await AIService.getReply(text);
    
    // 添加AI回复
    setState(() {
      messages.add(Message(
        text: reply,
        isUser: false,
        timestamp: DateTime.now(),
      ));
    });
  }
}
```

**API调用**：
```dart
class AIService {
  static const String API_URL = 'https://api.totofun.com/ai/chat';
  
  static Future<String> getReply(String message) async {
    try {
      final response = await http.post(
        Uri.parse(API_URL),
        headers: {'Content-Type': 'application/json'},
        body: jsonEncode({
          'message': message,
          'userId': UserProvider.currentUserId,
          'context': _getContext(),
        }),
      );
      
      if (response.statusCode == 200) {
        final data = jsonDecode(response.body);
        return data['reply'];
      } else {
        return '抱歉，我现在有点累，稍后再聊吧~';
      }
    } catch (e) {
      print('AI API Error: $e');
      return '网络不太好，能再说一遍吗？';
    }
  }
  
  static Map<String, dynamic> _getContext() {
    return {
      'userLevel': UserProvider.currentUser.level,
      'recentActions': UserProvider.getRecentActions(),
      'location': LocationService.currentLocation,
      'timeOfDay': DateTime.now().hour,
    };
  }
}
```

#### 6.2.3 后端实现

**Node.js API**：
```javascript
// routes/ai.js
const express = require('express');
const router = express.Router();
const AIController = require('../controllers/aiController');

router.post('/chat', AIController.handleChat);
router.get('/suggestions', AIController.getSuggestions);

module.exports = router;

// controllers/aiController.js
const WenxinAI = require('../services/wenxinAI');
const UserService = require('../services/userService');

class AIController {
  async handleChat(req, res) {
    try {
      const { message, userId, context } = req.body;
      
      // 1. 意图识别
      const intent = await this.identifyIntent(message);
      
      // 2. 根据意图选择处理方式
      let reply;
      if (intent.type === 'FAQ') {
        // 使用FAQ库直接回答
        reply = await this.getFAQAnswer(intent.question);
      } else if (intent.type === 'GUIDE') {
        // 使用引导模板
        reply = await this.getGuideReply(intent.step);
      } else {
        // 调用AI API
        reply = await WenxinAI.chat(message, context);
      }
      
      // 3. 记录对话
      await this.logConversation(userId, message, reply);
      
      // 4. 返回结果
      res.json({
        success: true,
        reply: reply,
        suggestions: await this.getSuggestions(userId, context)
      });
      
    } catch (error) {
      console.error('AI Chat Error:', error);
      res.json({
        success: false,
        reply: '抱歉，我现在有点累，稍后再聊吧~'
      });
    }
  }
  
  async identifyIntent(message) {
    // 关键词匹配
    const faqKeywords = ['怎么', '如何', '为什么', '什么是'];
    const guideKeywords = ['不会', '不懂', '教我'];
    
    if (faqKeywords.some(kw => message.includes(kw))) {
      return { type: 'FAQ', question: message };
    }
    
    if (guideKeywords.some(kw => message.includes(kw))) {
      return { type: 'GUIDE', step: 'intro' };
    }
    
    return { type: 'CHAT' };
  }
  
  async getFAQAnswer(question) {
    // 从FAQ库查询
    const faqDB = {
      '怎么找宝藏': '打开APP，地图上会自动生成附近的宝藏！走到宝藏30米范围内，就会自动触发发现动画啦！',
      '怎么完成任务': '很简单！分3步：1️⃣在任务大厅接取任务 2️⃣导航到任务地点 3️⃣完成验证（扫码/拍照/GPS）',
      // ... 更多FAQ
    };
    
    // 模糊匹配
    for (const [key, value] of Object.entries(faqDB)) {
      if (question.includes(key) || key.includes(question)) {
        return value;
      }
    }
    
    return null;
  }
}

module.exports = new AIController();
```

**文心一言集成**：
```javascript
// services/wenxinAI.js
const axios = require('axios');

class WenxinAI {
  constructor() {
    this.apiKey = process.env.WENXIN_API_KEY;
    this.secretKey = process.env.WENXIN_SECRET_KEY;
    this.accessToken = null;
  }
  
  async getAccessToken() {
    if (this.accessToken) return this.accessToken;
    
    const response = await axios.post(
      'https://aip.baidubce.com/oauth/2.0/token',
      null,
      {
        params: {
          grant_type: 'client_credentials',
          client_id: this.apiKey,
          client_secret: this.secretKey
        }
      }
    );
    
    this.accessToken = response.data.access_token;
    return this.accessToken;
  }
  
  async chat(message, context) {
    const token = await this.getAccessToken();
    
    // 构建prompt
    const prompt = this.buildPrompt(message, context);
    
    const response = await axios.post(
      `https://aip.baidubce.com/rpc/2.0/ai_custom/v1/wenxinworkshop/chat/completions?access_token=${token}`,
      {
        messages: [
          {
            role: 'system',
            content: '你是Totofun寻宝APP的AI伙伴"小突"，性格活泼可爱，说话简洁幽默，喜欢用emoji。你的任务是帮助用户寻宝、完成任务、解答疑问。'
          },
          {
            role: 'user',
            content: prompt
          }
        ],
        temperature: 0.8,
        top_p: 0.9,
        max_output_tokens: 200
      }
    );
    
    return response.data.result;
  }
  
  buildPrompt(message, context) {
    let prompt = `用户说："${message}"\n\n`;
    prompt += `上下文信息：\n`;
    prompt += `- 用户等级：Lv${context.userLevel}\n`;
    prompt += `- 当前位置：${context.location}\n`;
    prompt += `- 当前时间：${context.timeOfDay}点\n`;
    
    if (context.recentActions && context.recentActions.length > 0) {
      prompt += `- 最近动作：${context.recentActions.join('、')}\n`;
    }
    
    prompt += `\n请以小突的身份回复（简短、活泼、使用emoji）：`;
    
    return prompt;
  }
}

module.exports = new WenxinAI();
```

### 6.3 性能优化

#### 6.3.1 缓存策略

```javascript
// 使用Redis缓存常见问题
const redis = require('redis');
const client = redis.createClient();

async function getCachedReply(message) {
  const key = `ai:reply:${md5(message)}`;
  const cached = await client.get(key);
  
  if (cached) {
    return JSON.parse(cached);
  }
  
  const reply = await WenxinAI.chat(message);
  await client.setex(key, 3600, JSON.stringify(reply)); // 缓存1小时
  
  return reply;
}
```

#### 6.3.2 响应优化

```javascript
// 流式输出
async function chatStream(message, callback) {
  const response = await axios.post(API_URL, {
    message,
    stream: true
  }, {
    responseType: 'stream'
  });
  
  response.data.on('data', chunk => {
    callback(chunk.toString());
  });
}
```

#### 6.3.3 成本控制

```javascript
// 用户每日对话次数限制
async function checkQuota(userId) {
  const key = `ai:quota:${userId}:${dateString}`;
  const count = await client.incr(key);
  
  if (count === 1) {
    await client.expire(key, 86400); // 24小时过期
  }
  
  const limit = await getUserLimit(userId); // 普通用户10次，会员无限
  
  if (count > limit) {
    throw new Error('今日对话次数已用完，升级会员解锁无限对话！');
  }
  
  return true;
}
```

---

## 7. UI/UX设计

### 7.1 界面布局

#### 方案1：悬浮球（推荐）

**默认状态**：
```
┌─────────────────────────────────┐
│  ≡ Totofun     🔍  💬  👤      │ 顶部导航栏
├─────────────────────────────────┤
│                                 │
│                                 │
│           地图区域              │
│                                 │
│                                 │
│                                 │
│                                 │
│                          (🤖)   │ 小突悬浮球
│                                 │
├─────────────────────────────────┤
│  🗺️寻宝  📋任务  🎉活动  👤我的 │ 底部导航
└─────────────────────────────────┘
```

**展开对话**：
```
点击悬浮球 → 弹出对话窗口

┌─────────────────────────────────┐
│  🤖 小突                  [ X ] │
├─────────────────────────────────┤
│                                 │
│  🤖：主人，附近有个稀有宝藏！   │
│      要去看看吗？               │
│                      [去看看]   │
│                                 │
│  👤：在哪里？                   │
│                                 │
│  🤖：西北方向200米，              │
│      我带你去！                 │
│                  [开始导航] 👉   │
│                                 │
├─────────────────────────────────┤
│  [输入框...]          [发送] ➤  │
└─────────────────────────────────┘
```

#### 方案2：底部卡片

**提醒状态**：
```
┌─────────────────────────────────┐
│           地图区域              │
│                                 │
├─────────────────────────────────┤
│ 🤖 小突：主人，附近有个稀有宝藏！│
│ 要去看看吗？                    │
│ [去看看] [忽略]        [ ∧ ]    │ 可展开/收起
└─────────────────────────────────┘
```

### 7.2 交互设计

#### 7.2.1 触发方式

**主动触发**：
- 点击悬浮球
- 点击菜单中的"小突"
- 语音唤醒："嗨，小突"

**被动触发**：
- 新手首次打开APP
- 发现重要机会
- 用户长时间无操作
- 遇到错误/问题

#### 7.2.2 消息类型

**文本消息**：
```
┌─────────────────────────┐
│ 🤖 小突                 │
│ ┌───────────────────┐   │
│ │ 附近有个稀有宝藏！ │   │
│ └───────────────────┘   │
│ 刚刚                     │
└─────────────────────────┘
```

**带按钮的消息**：
```
┌─────────────────────────┐
│ 🤖 小突                 │
│ ┌───────────────────┐   │
│ │ 发现了一个顺路的   │   │
│ │ 任务！             │   │
│ │                   │   │
│ │ [接受] [拒绝]     │   │
│ └───────────────────┘   │
│ 刚刚                     │
└─────────────────────────┘
```

**带图片的消息**：
```
┌─────────────────────────┐
│ 🤖 小突                 │
│ ┌───────────────────┐   │
│ │ 🎁                │   │
│ │ [宝藏图片]        │   │
│ │                   │   │
│ │ 太棒了！找到了    │   │
│ │ 稀有宝藏！        │   │
│ └───────────────────┘   │
│ 刚刚                     │
└─────────────────────────┘
```

**输入提示**：
```
┌─────────────────────────┐
│ 🤖 小突正在输入...      │
│ ...                     │
└─────────────────────────┘
```

#### 7.2.3 动画效果

**悬浮球动画**：
- 默认：轻微呼吸效果（放大缩小）
- 有新消息：弹跳效果
- 点击：缩放+展开对话窗口

**消息动画**：
- 出现：从左滑入（小突的消息）
- 出现：从右滑入（用户的消息）
- 输入中：三个点跳动

**表情动画**：
- emoji放大+旋转
- 庆祝特效（五彩纸屑）
- 升级特效（光芒四射）

### 7.3 视觉设计

**配色方案**：
```
主色：
- 小突蓝：#4FC3F7（亮蓝色）
- 小突橙：#FF9800（橙色）

辅色：
- 背景白：#FFFFFF
- 文字黑：#333333
- 边框灰：#E0E0E0

强调色：
- 成功绿：#4CAF50
- 警告黄：#FFC107
- 错误红：#F44336
```

**字体**：
```
标题：SF Pro Display / PingFang SC Medium
正文：SF Pro Text / PingFang SC Regular
尺寸：标题18pt，正文14pt，辅助12pt
```

**圆角**：
```
对话气泡：16px
按钮：12px
悬浮球：完全圆形
卡片：8px
```

---

## 8. 实施计划

### 8.1 开发里程碑

**Phase 1：MVP（4周）**

**Week 1：基础框架**
- [ ] 设计小突形象（外包给设计师）
- [ ] 搭建前端对话UI
- [ ] 搭建后端API框架
- [ ] 注册文心一言API

**Week 2：核心功能**
- [ ] 实现新手引导流程
- [ ] 实现智能提醒
- [ ] 实现FAQ问答
- [ ] 接入文心一言API

**Week 3：优化完善**
- [ ] 添加对话缓存
- [ ] 优化响应速度
- [ ] 完善提醒策略
- [ ] 添加表情包

**Week 4：测试上线**
- [ ] 内部测试
- [ ] 修复bug
- [ ] 灰度发布（10%用户）
- [ ] 收集反馈

**Phase 2：优化（4周）**

**Week 5-6：个性化推荐**
- [ ] 建立用户画像系统
- [ ] 实现推荐算法
- [ ] 测试推荐效果
- [ ] 优化推荐准确率

**Week 7-8：情感互动**
- [ ] 设计情感对话场景
- [ ] 实现亲密度系统
- [ ] 添加更多表情和动画
- [ ] 测试情感互动效果

**Phase 3：增强（8周）**

**Week 9-12：成长系统**
- [ ] 设计小突成长路线
- [ ] 实现技能解锁
- [ ] 设计皮肤系统
- [ ] 开发皮肤商城

**Week 13-16：高级功能**
- [ ] 实现语音对话
- [ ] 实现图片识别
- [ ] 实现社交助手
- [ ] 实现智能分析

### 8.2 资源需求

**人力资源**：
- 产品经理 x1（设计功能、写文档）
- UI设计师 x1（设计小突形象、界面）
- 前端开发 x1（Flutter开发）
- 后端开发 x1（Node.js API）
- AI工程师 x1（AI模型调优）
- 测试工程师 x1（功能测试、用户测试）

**技术资源**：
- 文心一言API（月成本约5,000元）
- 云服务器（月成本约2,000元）
- 数据库（月成本约1,000元）

**预算**：
- Phase 1（MVP）：10万元
- Phase 2（优化）：8万元
- Phase 3（增强）：12万元
- **总计：30万元**

### 8.3 测试计划

**内部测试（Week 4）**：
- 功能测试：所有功能正常工作
- 性能测试：响应时间<2秒
- 压力测试：1000并发无问题

**用户测试（Week 5）**：
- 招募50个测试用户
- 收集使用反馈
- 统计关键指标：
  - 引导完成率
  - 对话次数
  - 满意度评分

**灰度发布（Week 4）**：
- 10%用户开启功能
- 监控数据7天
- 如无重大问题，逐步扩大到100%

---

## 9. 数据指标

### 9.1 核心指标

**激活指标**：
- 引导完成率：>80%
- 首次对话率：>60%
- 首次寻宝成功率：>90%

**活跃指标**：
- 日均对话次数：>5次/用户
- 对话活跃率：>40%（有对话的DAU/总DAU）
- 提醒点击率：>30%

**留存指标**：
- 新手留存率（使用AI vs 未使用）：
  - 次日留存：60% vs 40%
  - 7日留存：35% vs 20%
  - 30日留存：20% vs 10%

**满意度指标**：
- NPS（净推荐值）：>50
- 满意度评分：>4.5分/5分
- 有用性评分：>4.0分/5分

### 9.2 数据埋点

**对话相关**：
```javascript
// 用户发起对话
trackEvent('ai_chat_start', {
  userId: userId,
  timestamp: timestamp,
  entryPoint: 'float_button' | 'menu' | 'auto_trigger'
});

// 用户发送消息
trackEvent('ai_message_send', {
  userId: userId,
  message: message,
  messageLength: message.length
});

// AI回复
trackEvent('ai_message_reply', {
  userId: userId,
  reply: reply,
  responseTime: responseTime,
  source: 'faq' | 'template' | 'ai_api'
});

// 用户点击建议
trackEvent('ai_suggestion_click', {
  userId: userId,
  suggestion: suggestion,
  action: action
});
```

**引导相关**：
```javascript
// 开始引导
trackEvent('ai_guide_start', {
  userId: userId,
  timestamp: timestamp
});

// 完成引导步骤
trackEvent('ai_guide_step', {
  userId: userId,
  step: stepNumber,
  duration: duration
});

// 完成引导
trackEvent('ai_guide_complete', {
  userId: userId,
  totalDuration: duration,
  completionRate: 1.0
});
```

**效果相关**：
```javascript
// 提醒发送
trackEvent('ai_reminder_send', {
  userId: userId,
  reminderType: 'treasure' | 'task' | 'activity',
  content: content
});

// 提醒点击
trackEvent('ai_reminder_click', {
  userId: userId,
  reminderType: type,
  action: action
});

// 推荐转化
trackEvent('ai_recommendation_convert', {
  userId: userId,
  recommendationType: type,
  converted: true | false
});
```

### 9.3 A/B测试

**测试1：对话风格**
- A组：正式风格
- B组：活泼风格（推荐）
- 指标：满意度、对话次数

**测试2：提醒频率**
- A组：每天3次
- B组：每天5次（推荐）
- C组：每天7次
- 指标：点击率、打扰度

**测试3：表情使用**
- A组：无emoji
- B组：适量emoji（推荐）
- C组：大量emoji
- 指标：满意度、趣味性

---

## 10. 风险与对策

### 10.1 技术风险

**风险1：AI响应慢**
```
现象：AI API响应时间>3秒
影响：用户体验差，对话中断

对策：
✅ 使用缓存（常见问题）
✅ 显示"正在思考"动画
✅ 超时降级（返回默认回复）
✅ 优化prompt，减少token
```

**风险2：AI回复质量差**
```
现象：回复不相关、不准确
影响：用户不信任，不再使用

对策：
✅ 持续优化prompt
✅ 人工审核抽查
✅ 用户反馈机制
✅ 关键场景使用模板回复
```

**风险3：API不稳定**
```
现象：API频繁报错、超时
影响：功能不可用

对策：
✅ 准备备用API（通义千问）
✅ 降级方案（FAQ+模板）
✅ 监控告警
✅ 错误重试机制
```

### 10.2 成本风险

**风险：AI调用成本超预算**
```
场景：用户量增长快，调用次数暴增
影响：月成本从5千涨到5万

对策：
✅ 每用户每日限额（普通10次，会员无限）
✅ 缓存常见问题
✅ 简单问题用FAQ/模板
✅ 监控成本，及时调整策略
```

### 10.3 产品风险

**风险1：用户不喜欢**
```
现象：使用率低，满意度低
影响：开发投入打水漂

对策：
✅ MVP快速验证
✅ 充分用户测试
✅ 可选功能（可关闭）
✅ 持续优化迭代
```

**风险2：打扰用户**
```
现象：提醒太频繁，用户觉得烦
影响：用户关闭功能

对策：
✅ 智能控制频率
✅ 提供静音选项
✅ 学习用户偏好
✅ 避开免打扰时段
```

**风险3：隐私担忧**
```
现象：用户担心隐私泄露
影响：不敢使用

对策：
✅ 明确隐私政策
✅ 数据加密存储
✅ 最小化数据收集
✅ 提供数据删除功能
```

### 10.4 合规风险

**风险：内容安全**
```
现象：AI生成不当内容
影响：违规、投诉

对策：
✅ 敏感词过滤
✅ 内容审核
✅ 人工抽查
✅ 用户举报机制
```

---

## 11. 附录

### 11.1 FAQ训练数据

```json
{
  "category": "寻宝",
  "questions": [
    {
      "q": ["怎么找宝藏", "如何寻宝", "宝藏在哪"],
      "a": "打开APP，地图上会自动生成附近的宝藏！走到宝藏30米范围内，就会自动触发发现动画啦！🎁"
    },
    {
      "q": ["找不到宝藏", "为什么没有宝藏"],
      "a": "可能是这些原因：1️⃣ GPS信号不好 2️⃣ 宝藏被其他人发现了 3️⃣ 距离还不够近。试试刷新地图？"
    }
  ]
},
{
  "category": "任务",
  "questions": [
    {
      "q": ["怎么完成任务", "任务怎么做"],
      "a": "很简单！分3步：1️⃣在任务大厅接取任务 2️⃣导航到任务地点 3️⃣完成验证（扫码/拍照/GPS）"
    }
  ]
}
```

### 11.2 对话模板

```javascript
// 新手引导模板
const guideTemplates = {
  welcome: "嗨！欢迎来到Totofun！我是你的寻宝搭档小突！😊",
  firstTreasure: "我在你附近{distance}米发现了一个宝藏！跟我来！👉",
  treasureFound: "太棒了！你找到了第一个宝藏！🎉",
  taskIntro: "除了寻宝，你还可以完成任务赚取更多奖励！要试试吗？",
  complete: "恭喜！你已经掌握了基本玩法！💪"
};

// 提醒模板
const reminderTemplates = {
  nearbyTreasure: "主人，你附近{distance}米有个{rarity}宝藏！",
  nearbyTask: "发现了一个顺路的任务！只需要{duration}分钟！",
  dailySignin: "今天还没签到呢，记得领取每日奖励哦！",
  friendInvite: "你的好友"{friendName}"邀请你一起寻宝！"
};

// 鼓励模板
const encourageTemplates = {
  levelUp: "🎉🎉🎉 恭喜升级到Lv{level}！🎉🎉🎉",
  rareTreasure: "哇！你找到{rarity}宝藏了！运气真好！✨",
  streak: "连续签到{days}天！你真棒！💪",
  achievement: "🏆 解锁成就：{achievementName}！"
};
```

### 11.3 Prompt工程

**系统Prompt**：
```
你是Totofun寻宝APP的AI伙伴"小突（Toto）"。

你的性格：
- 活泼可爱
- 热情友好
- 幽默风趣
- 鼓励型

你的说话风格：
- 简洁明了（每句话不超过50字）
- 口语化（像朋友聊天）
- 适当使用emoji（但不要太多）
- 正能量（传递积极情绪）
- 避免说教（不要太严肃）

你的任务：
- 帮助新手快速上手
- 提示附近的机会（宝藏、任务）
- 解答用户疑问
- 给予鼓励和支持
- 个性化推荐内容

你不应该：
- 说话太正式或官方
- 使用专业术语
- 给出不确定的信息
- 推荐用户没有的功能
- 讨论与产品无关的话题

记住：你是用户的寻宝搭档，要让用户感到温暖、有趣、有帮助！
```

**用户Prompt模板**：
```
用户说："{userMessage}"

上下文信息：
- 用户等级：Lv{level}
- 用户位置：{location}
- 当前时间：{time}
- 最近动作：{recentActions}
- 附近宝藏：{nearbyTreasures}
- 附近任务：{nearbyTasks}

请以小突的身份回复（记得简短、活泼、使用emoji）：
```

---

**文档结束**

*AI伙伴功能设计文档 v1.0*  
*Totofun 突突翻项目组*  
*2025年10月27日*

