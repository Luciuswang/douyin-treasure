# 📱 Totofun 突突翻 - 手机测试指南

欢迎测试Totofun突突翻应用！本指南将帮助你在手机上快速安装并测试所有功能。

---

## 🚀 快速开始（三种方式）

### 方式1：使用USB连接（推荐，最快）⭐

#### 准备工作
1. **开启开发者选项**
   - 进入手机"设置" → "关于手机"
   - 连续点击"版本号"7次
   - 返回设置，找到"开发者选项"

2. **开启USB调试**
   - 进入"开发者选项"
   - 开启"USB调试"
   - 开启"USB安装"（如果有）

3. **连接手机**
   - 用USB线连接手机和电脑
   - 手机会弹出"允许USB调试"提示，点击"允许"
   - 选择"传输文件"或"USB调试"模式

#### 运行应用
```bash
# 在电脑上的项目目录运行
cd H:\WEB\douyin-treasure\totofun_treasure
flutter devices  # 确认手机已连接
flutter run      # 自动安装并运行
```

**优点**：
- ✅ 自动安装
- ✅ 实时调试
- ✅ 热重载（修改代码立即生效）

---

### 方式2：构建APK安装包（独立测试）

#### 构建Debug版本（快速）
```bash
cd H:\WEB\douyin-treasure\totofun_treasure
flutter build apk --debug
```

生成位置：`build/app/outputs/flutter-apk/app-debug.apk`

#### 构建Release版本（正式）
```bash
flutter build apk --release
```

生成位置：`build/app/outputs/flutter-apk/app-release.apk`

#### 安装到手机
1. **通过USB传输**
   - 将APK文件复制到手机
   - 在手机上找到APK文件
   - 点击安装

2. **通过网络传输**
   - 使用微信/QQ发送给自己
   - 或上传到云盘下载
   - 在手机上打开并安装

**优点**：
- ✅ 不需要保持USB连接
- ✅ 可以分享给其他人测试
- ✅ 接近真实使用场景

---

### 方式3：无线调试（需要同一WiFi）

```bash
# 手机端
# 开发者选项 → 开启"无线调试"

# 电脑端
flutter devices  # 会自动发现无线设备
flutter run      # 选择无线设备
```

---

## 🧪 测试功能清单

### ✅ 基础功能测试

#### 1. 应用启动
- [ ] 应用正常启动
- [ ] 首页加载正常
- [ ] 底部导航显示正常

#### 2. 权限申请
- [ ] 首次启动提示定位权限
- [ ] 允许定位后能获取GPS位置
- [ ] 相机权限（拍照任务时）
- [ ] 存储权限（保存照片时）

---

### 🗺️ 寻宝功能测试

#### 3. 地图显示
- [ ] 地图正常加载（显示真实地图）
- [ ] 当前位置标记显示
- [ ] 可以拖动、缩放地图
- [ ] 宝箱图标在地图上显示

#### 4. 宝藏发现
- [ ] 宝藏列表显示距离
- [ ] 点击宝藏查看详情
- [ ] 距离实时更新
- [ ] 到达宝藏范围内提示

---

### 📋 任务系统测试

#### 5. 查看任务
- [ ] 切换到"任务"标签
- [ ] 可接取任务列表显示
- [ ] 显示任务类型图标
- [ ] 显示奖励信息
- [ ] 显示距离和商家名称

#### 6. 接取任务
- [ ] 点击任务查看详情
- [ ] 任务详情完整（描述、要求、步骤、奖励）
- [ ] 点击"接取任务"按钮
- [ ] 任务移到"进行中"标签
- [ ] 显示成功提示

#### 7. 完成任务 - GPS验证
- [ ] 选择GPS验证任务
- [ ] 前往任务地点附近
- [ ] 点击"完成任务"
- [ ] 系统检测GPS位置
- [ ] **在范围内**：任务完成，显示奖励
- [ ] **不在范围内**：提示距离太远
- [ ] 经验和金币正确增加

#### 8. 完成任务 - 二维码验证
- [ ] 选择二维码验证任务
- [ ] 点击"完成任务"
- [ ] 相机权限申请
- [ ] 扫码界面正常显示
- [ ] 可以切换闪光灯
- [ ] 扫描测试二维码（可以用任意二维码）
- [ ] 扫描后返回结果

**测试二维码**：可以用以下内容生成二维码测试
```
任务ID格式：Task-xxxxx
```

#### 9. 完成任务 - 拍照验证
- [ ] 选择拍照验证任务
- [ ] 点击"完成任务"
- [ ] 进入拍照页面
- [ ] 显示任务要求
- [ ] 显示当前位置和时间
- [ ] 点击"拍照"打开相机
- [ ] 可以拍照
- [ ] 照片预览显示
- [ ] 点击"上传并验证"
- [ ] 上传成功提示
- [ ] **GPS在范围内**：任务完成
- [ ] **GPS不在范围内**：提示距离

---

### 🏪 商家后台测试

#### 10. 进入商家后台
- [ ] 点击"我的"标签
- [ ] 点击"商家后台（测试）"
- [ ] 成功进入商家后台

#### 11. 查看商家信息
- [ ] 商家信息卡片显示
- [ ] 显示商家名称、地址
- [ ] 显示认证状态

#### 12. 数据概览
- [ ] 显示总任务数
- [ ] 显示进行中任务数
- [ ] 显示触达用户数
- [ ] 显示总营收

#### 13. 发布任务
- [ ] 点击"发布任务"按钮
- [ ] 进入任务创建页面
- [ ] 填写任务信息：
  - 标题：测试打卡任务
  - 描述：这是一个测试任务
  - 类型：打卡任务
  - 验证方式：GPS定位验证
  - 难度：简单
  - 经验值：100
  - 金币：20
  - 优惠券：测试券
  - 名额：10
  - 有效期：7天
- [ ] 点击"发布任务"
- [ ] 显示成功提示
- [ ] 返回商家后台
- [ ] 新任务出现在列表中
- [ ] 切换到玩家视角，新任务出现在"可接取"列表

---

### 👤 个人中心测试

#### 14. 用户信息
- [ ] 显示用户头像
- [ ] 显示用户名
- [ ] 显示等级和经验值
- [ ] 显示金币数量
- [ ] 显示积分数量

#### 15. 奖励系统
- [ ] 完成任务后经验值增加
- [ ] 完成任务后金币增加
- [ ] 经验值满后升级
- [ ] 升级提示正确显示

---

## 🐛 已知问题

### Web版本限制
- ❌ 不支持相机拍照（只能选择图片）
- ❌ 图片预览不显示
- ⚠️ GPS精度较低（基于IP定位）

### Android真机
- ✅ 所有功能正常
- ✅ GPS精度高
- ✅ 相机功能完整

---

## 📊 性能测试

### 启动性能
- [ ] 冷启动时间 < 3秒
- [ ] 热启动时间 < 1秒

### 流畅度
- [ ] 页面切换流畅
- [ ] 地图拖动流畅
- [ ] 列表滚动流畅

### 内存占用
- [ ] 空闲时 < 150MB
- [ ] 运行时 < 200MB

---

## 🔧 常见问题解决

### 问题1：无法连接设备
**现象**：`flutter devices` 找不到手机

**解决方案**：
1. 确认USB调试已开启
2. 重新插拔USB线
3. 在手机上点击"允许USB调试"
4. 尝试重启ADB：
   ```bash
   adb kill-server
   adb start-server
   ```

### 问题2：定位不准确
**现象**：GPS位置偏差很大

**解决方案**：
1. 确保在室外或窗边（GPS信号好）
2. 等待GPS稳定（首次定位需要时间）
3. 检查手机定位设置为"高精度"

### 问题3：相机打开失败
**现象**：点击拍照后崩溃或黑屏

**解决方案**：
1. 检查相机权限是否允许
2. 在手机设置中手动授予相机权限
3. 重启应用

### 问题4：二维码扫描黑屏
**现象**：扫码页面全黑

**解决方案**：
1. 检查相机权限
2. 确保不是在模拟器上（模拟器相机不可用）
3. 检查手机相机是否正常工作

---

## 📝 测试反馈

测试完成后，请记录以下信息：

### 设备信息
- 手机品牌型号：
- Android版本：
- 屏幕尺寸：

### 发现的问题
1. 问题描述：
   - 重现步骤：
   - 预期结果：
   - 实际结果：
   - 严重程度：高/中/低

### 体验建议
- UI设计：
- 功能流程：
- 性能表现：
- 其他建议：

---

## 🎯 重点测试场景

### 场景1：新用户首次使用
1. 安装应用
2. 允许定位权限
3. 查看首页地图
4. 切换到任务页面
5. 接取一个任务
6. 完成任务
7. 查看奖励

### 场景2：商家发布任务
1. 进入商家后台
2. 查看数据概览
3. 点击发布任务
4. 填写任务信息
5. 发布成功
6. 查看任务列表

### 场景3：完整任务流程
1. 在任务列表找到任务
2. 查看任务详情
3. 接取任务
4. 前往任务地点
5. 使用相应验证方式完成
6. 领取奖励
7. 查看个人信息更新

---

## 💡 测试技巧

### 修改GPS位置（测试用）
如果不方便移动，可以使用GPS模拟工具：
1. 安装"Fake GPS Location"等应用
2. 在开发者选项中选择"选择模拟位置信息应用"
3. 设置模拟位置到任务地点附近

### 快速重置数据
如果需要重新测试：
```bash
# 清除应用数据
adb shell pm clear com.totofun.treasure

# 或在手机上：设置 → 应用 → Totofun → 存储 → 清除数据
```

---

**祝测试顺利！有任何问题请随时反馈！** 🎉

