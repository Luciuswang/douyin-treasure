# 📱 Totofun 突突翻 - 功能测试指南

## 🚀 快速启动

### 方法1：使用启动脚本（推荐）
双击 `启动应用.bat`，选择运行平台：
- **选项1** - Windows桌面版（最快，适合快速测试）
- **选项2** - Chrome浏览器（适合UI测试）
- **选项3** - Android模拟器（完整功能测试）
- **选项4** - 启动Android模拟器
- **选项5** - 查看可用设备

### 方法2：命令行启动
```bash
# Windows 桌面版
flutter run -d windows

# Chrome 浏览器
flutter run -d chrome

# Android 模拟器（需先启动模拟器）
flutter emulators --launch Medium_Phone_API_36.0
flutter run -d emulator-5554
```

---

## 📋 功能测试清单

### ✅ 基础功能测试

#### 1. 应用启动和导航
- [ ] 应用成功启动
- [ ] 底部导航栏显示正常（寻宝、任务、我的）
- [ ] 可以切换不同页面
- [ ] 页面切换流畅无卡顿

#### 2. 定位权限
- [ ] 首次启动提示定位权限
- [ ] 允许定位权限后可以获取位置
- [ ] 拒绝权限后显示提示信息
- [ ] 可以引导用户去设置页面

---

### 🎯 任务系统测试

#### 3. 任务列表
- [ ] 可以查看"可接取"任务列表
- [ ] 任务卡片显示完整信息（标题、商家、距离、奖励）
- [ ] 任务按难度显示不同颜色标签
- [ ] 可以查看任务详情
- [ ] 任务详情显示完整（描述、要求、步骤、奖励）

#### 4. 接取任务
- [ ] 点击"接取任务"按钮
- [ ] 任务状态从"可接取"变为"进行中"
- [ ] 任务出现在"进行中"标签页
- [ ] 显示成功提示信息

#### 5. GPS定位验证
- [ ] 选择GPS验证任务
- [ ] 点击"完成任务"
- [ ] 系统检测GPS位置
- [ ] **在范围内**：显示成功，任务完成，显示奖励对话框
- [ ] **不在范围内**：显示距离提示，任务保持进行中
- [ ] 用户经验和金币正确增加

#### 6. 二维码验证
- [ ] 选择二维码验证任务
- [ ] 点击"完成任务"
- [ ] 进入扫码页面
- [ ] 相机预览正常显示
- [ ] 可以切换闪光灯
- [ ] 扫描二维码后返回结果
- [ ] **正确二维码**：任务完成
- [ ] **错误二维码**：提示二维码不匹配

#### 7. 拍照验证
- [ ] 选择拍照验证任务
- [ ] 点击"完成任务"
- [ ] 进入拍照页面
- [ ] 显示任务要求说明
- [ ] 显示当前位置和时间
- [ ] 点击"拍摄照片"打开相机
- [ ] 可以拍照
- [ ] 可以从相册选择
- [ ] 照片预览正常显示
- [ ] 点击"上传并验证"
- [ ] 显示上传进度
- [ ] **GPS在范围内**：任务完成，显示奖励
- [ ] **GPS不在范围内**：提示距离不符

#### 8. 已完成任务
- [ ] 完成的任务出现在"已完成"标签页
- [ ] 显示完成时间
- [ ] 显示获得的奖励

---

### 🏪 商家后台测试

#### 9. 进入商家后台
- [ ] 点击底部"我的"
- [ ] 点击"商家后台（测试）"
- [ ] 成功进入商家后台页面

#### 10. 商家信息展示
- [ ] 显示商家名称
- [ ] 显示商家地址
- [ ] 显示商家类别
- [ ] 显示认证状态

#### 11. 数据概览
- [ ] 显示发布任务数
- [ ] 显示进行中任务数
- [ ] 显示已完成任务数
- [ ] 显示总参与人数

#### 12. 任务列表
- [ ] 显示商家发布的所有任务
- [ ] 任务卡片显示状态（可接取/进行中/已完成）
- [ ] 显示剩余名额
- [ ] 显示参与人数

#### 13. 发布任务
- [ ] 点击"发布任务"按钮
- [ ] 进入任务创建页面
- [ ] 所有表单字段正常显示

**表单验证：**
- [ ] 标题必填
- [ ] 描述必填
- [ ] 可以选择任务类型（6种）
- [ ] 可以选择验证方式（5种）
- [ ] 可以选择难度（3种）
- [ ] 经验值输入（数字）
- [ ] 金币输入（数字）
- [ ] 优惠券输入（可选）
- [ ] 名额输入（数字，必须>0）
- [ ] 有效天数输入（数字，必须>0）

**任务发布：**
- [ ] 点击"发布任务"
- [ ] 验证通过后显示成功提示
- [ ] 返回商家后台
- [ ] 新任务出现在列表中
- [ ] 切换到玩家视角，新任务出现在"可接取"列表

---

### 🗺️ 地图功能测试

#### 14. 地图显示
- [ ] 地图页面正常加载
- [ ] 显示当前位置信息
- [ ] 显示宝藏统计
- [ ] 显示任务统计

#### 15. 地图上的任务
- [ ] 底部显示宝藏和任务标签页
- [ ] 可以切换查看宝藏或任务
- [ ] 任务列表显示附近2公里内的任务
- [ ] 点击任务可以查看详情
- [ ] 可以从地图直接接取任务

---

### 👤 用户信息测试

#### 16. 用户资料
- [ ] 显示用户头像
- [ ] 显示用户名
- [ ] 显示等级
- [ ] 显示经验值
- [ ] 显示金币数量
- [ ] 显示积分数量

#### 17. 奖励系统
- [ ] 完成任务后经验值增加
- [ ] 完成任务后金币增加
- [ ] 经验值达到阈值后升级
- [ ] 升级后显示提示

---

## 🐛 已知问题和限制

### Windows 桌面版
- ✅ 所有UI功能正常
- ❌ 相机功能不可用（Windows没有相机API）
- ❌ 二维码扫描不可用
- ⚠️ GPS定位精度较低

### Chrome 浏览器
- ✅ 所有UI功能正常
- ❌ 相机功能不可用（Web限制）
- ❌ 二维码扫描不可用
- ⚠️ GPS定位精度较低（基于IP）

### Android 模拟器
- ✅ 所有功能可用
- ⚠️ GPS位置是模拟的（默认在美国加州）
- ⚠️ 相机是虚拟的（可能显示黑屏）
- 💡 可以在模拟器设置中修改GPS位置

### Android 真机（推荐）
- ✅ 所有功能完整可用
- ✅ GPS精度高
- ✅ 相机功能完整
- ✅ 二维码扫描流畅

---

## 📊 测试数据

### 预置商家
1. **星巴克咖啡（西湖店）**
   - 地址：浙江省杭州市西湖区文三路100号
   - 类别：餐饮

2. **肯德基（武林广场店）**
   - 地址：浙江省杭州市拱墅区武林广场20号
   - 类别：餐饮

### 示例任务
系统自动生成10个示例任务，包括：
- 打卡任务
- 消费任务
- 拍照任务
- 评价任务
- 分享任务
- 连锁任务

每个任务都有：
- 不同的验证方式（GPS/二维码/拍照）
- 不同的难度（简单/中等/困难）
- 不同的奖励（经验、金币、优惠券）
- 不同的名额和有效期

---

## 🔧 调试技巧

### 查看日志
```bash
# Flutter日志
flutter logs

# Android日志
adb logcat | grep -i flutter
```

### 修改GPS位置（Android模拟器）
1. 点击模拟器右侧的"..."按钮
2. 选择"Location"
3. 输入经纬度或搜索地址
4. 点击"Send"

### 重置应用数据
```bash
# Android
adb shell pm clear com.totofun.treasure

# 或在应用设置中清除数据
```

### 热重载
在应用运行时：
- 按 `r` - 热重载（保留状态）
- 按 `R` - 热重启（重置状态）
- 按 `q` - 退出

---

## 📝 测试报告模板

### 测试环境
- 平台：Windows / Chrome / Android
- 设备：
- Flutter版本：
- 测试日期：

### 测试结果
- [ ] 基础功能正常
- [ ] 任务系统正常
- [ ] 商家后台正常
- [ ] 地图功能正常

### 发现的问题
1. 问题描述
   - 重现步骤：
   - 预期结果：
   - 实际结果：
   - 严重程度：高/中/低

### 改进建议
1. 建议内容

---

## 💡 测试建议

1. **先测试基础功能**
   - 确保应用可以启动
   - 确保导航正常
   - 确保定位权限正常

2. **再测试任务流程**
   - 按照任务类型逐个测试
   - 测试不同的验证方式
   - 测试边界情况（距离不够、权限拒绝等）

3. **最后测试商家功能**
   - 测试任务创建
   - 测试数据统计
   - 测试任务管理

4. **记录所有问题**
   - 截图或录屏
   - 详细描述重现步骤
   - 标注严重程度

---

## 🎯 下一步计划

完成测试后，可以考虑：
1. 修复发现的问题
2. 优化用户体验
3. 添加更多功能
4. 准备真机测试
5. 准备上线发布

---

**祝测试顺利！** 🚀

如有任何问题，请随时反馈！

