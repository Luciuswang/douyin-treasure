# 📱 添加好友使用指南

## 🎉 新功能上线！

现在你可以添加真实的朋友进行聊天了！支持三种添加方式。

---

## 方式1️⃣：通过ID添加（推荐）

### 步骤：

1. **打开聊天界面**
   - 点击页面右下角的 💬 按钮

2. **点击"+"按钮**
   - 在好友列表顶部，点击 **+** 按钮

3. **查看你的ID**
   - 在"分享我的ID"区域，可以看到你的唯一ID
   - 例如：`user_1731340123456`
   - 点击"复制"按钮复制你的ID

4. **分享给朋友**
   - 通过微信、QQ、短信等方式发送你的ID给朋友
   - 例如：
   ```
   嘿！我在用TotoFun宝藏猎人，快来加我聊天吧！
   我的ID：user_1731340123456
   ```

5. **添加朋友的ID**
   - 当朋友给你发送他的ID后
   - 在"通过ID添加"区域输入朋友的ID
   - 点击"添加好友"按钮

6. **开始聊天**
   - 添加成功后，好友会出现在列表中
   - 点击好友头像即可开始聊天

---

## 方式2️⃣：通过分享链接（最简单）

### 步骤：

1. **生成分享链接**
   - 打开聊天界面 → 点击 **+** 按钮
   - 点击"🔗 生成分享链接"按钮
   - 链接会自动复制到剪贴板

2. **发送给朋友**
   - 将链接通过微信、QQ等发送给朋友
   - 例如：
   ```
   https://你的网站地址/index.html?addFriend=user_1731340123456
   ```

3. **朋友点击链接**
   - 朋友点击链接后，会自动打开页面
   - 系统会自动添加你为好友
   - 朋友会看到提示，要求分享他的ID给你

4. **互相添加**
   - 朋友将他的ID发送给你
   - 你也添加他的ID
   - 双方都添加后，就可以互相聊天了

---

## 方式3️⃣：面对面添加

### 适用场景：
- 朋友就在你身边
- 线下活动、聚会

### 步骤：

1. **打开你的信息**
   - 点击聊天界面的 👤 按钮
   - 显示你的ID

2. **让朋友输入**
   - 朋友在他的设备上打开添加好友界面
   - 输入你显示的ID
   - 点击添加

3. **你也添加朋友**
   - 同样的方式，你输入朋友的ID
   - 完成互相添加

---

## 🎨 个性化设置

### 修改昵称和头像

1. **打开我的信息**
   - 点击聊天界面的 👤 按钮

2. **修改昵称**
   - 在输入框中输入新昵称
   - 点击"保存"按钮

3. **选择头像**
   - 在"选择头像"区域
   - 点击任意头像图标
   - 自动保存

4. **查看统计**
   - 好友数量
   - 消息总数

---

## 💬 开始聊天

### 发送消息

1. **选择好友**
   - 在好友列表中点击任意好友

2. **输入消息**
   - 在底部输入框输入文字
   - 按Enter键或点击"发送"按钮

3. **分享位置**
   - 点击 📍 按钮
   - 需要先获取GPS定位
   - 位置会发送给好友

### 查看消息

- **未读消息**：聊天按钮上会显示红色徽章
- **在线状态**：好友头像旁的 ● 表示在线
- **消息时间**：显示相对时间（刚刚、5分钟前等）

---

## 🔍 常见问题

### Q1: 为什么添加好友后看不到对方？
**A:** 需要双方互相添加才能聊天。确保：
1. 你添加了对方的ID
2. 对方也添加了你的ID

### Q2: 如何知道对方是否在线？
**A:** 
- ● 绿色圆点 = 在线
- ○ 灰色圆点 = 离线
- 注意：目前在线状态是模拟的，实际需要服务器支持

### Q3: 消息会丢失吗？
**A:** 
- 消息保存在浏览器本地存储（localStorage）
- 不会因为刷新页面而丢失
- 但清除浏览器数据会丢失
- 建议定期备份重要信息

### Q4: 可以删除好友吗？
**A:** 目前版本暂不支持删除好友功能，即将推出。

### Q5: 可以发送图片吗？
**A:** 目前支持：
- ✅ 文字消息
- ✅ 位置分享
- ⏳ 图片发送（开发中）
- ⏳ 语音消息（计划中）

### Q6: 为什么对方收不到我的消息？
**A:** 当前版本使用本地存储，消息不会实时同步。要实现真正的实时聊天，需要：
1. 配置Firebase（参考Firebase配置指南）
2. 或使用其他后端服务

### Q7: 如何在手机上使用？
**A:** 
1. 手机浏览器直接打开网页即可
2. 或构建Android APK安装（参考手机测试指南）

---

## 🚀 高级功能

### 分享宝藏位置

1. 在地图上找到宝藏
2. 打开聊天，选择好友
3. 点击 📍 按钮
4. 当前位置会发送给好友
5. 好友可以点击"查看位置"在地图上显示

### 组队寻宝（即将推出）

- 创建寻宝小队
- 邀请好友加入
- 共享宝藏发现
- 团队排行榜

---

## 📊 使用技巧

### 技巧1：快速添加多个好友
- 将你的ID或分享链接发到群聊
- 所有人都能快速添加你

### 技巧2：备份好友列表
- 定期截图保存你的ID
- 记录重要好友的ID
- 防止数据丢失

### 技巧3：个性化昵称
- 使用真实姓名或昵称
- 方便好友识别
- 可以添加emoji表情

---

## 🎯 下一步计划

我们正在开发：
- ✅ 好友添加功能（已完成）
- ⏳ 群聊功能
- ⏳ 图片发送
- ⏳ 语音消息
- ⏳ 视频通话
- ⏳ 好友删除/拉黑
- ⏳ 消息撤回
- ⏳ 表情包
- ⏳ 文件传输

---

## 💡 示例场景

### 场景1：线下活动
```
你：大家好！我是活动组织者，加我好友方便联系
    我的ID：user_1731340123456

参与者A：已添加！我的ID：user_1731340234567
参与者B：我也加了！ID：user_1731340345678
```

### 场景2：寻宝组队
```
你：发现一个大宝藏！需要组队，谁来？
    📍 [位置分享]

好友A：我来！在哪里？
你：点击位置查看，我在这里等你
好友A：收到，马上到！
```

### 场景3：日常聊天
```
好友：今天去了新开的咖啡店，超棒！
你：在哪里？发个位置看看
好友：📍 [位置分享]
你：离我好近！明天一起去
```

---

## 📞 需要帮助？

如果遇到问题：
1. 查看本指南的常见问题部分
2. 检查浏览器控制台是否有错误
3. 尝试刷新页面
4. 清除浏览器缓存后重试

---

**祝你玩得开心！🎉**

立即打开 `index.html` 开始添加好友吧！

