# â˜ï¸ äº‘æœåŠ¡éƒ¨ç½²æŒ‡å—

## ğŸ¯ æ¨èæ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šRailwayï¼ˆæ¨èï¼Œæœ€ç®€å•ï¼‰â­
- âœ… å…è´¹é¢åº¦ï¼š$5/æœˆ
- âœ… è‡ªåŠ¨éƒ¨ç½²ï¼Œæ”¯æŒGitHub
- âœ… å†…ç½®ç¯å¢ƒå˜é‡ç®¡ç†
- âœ… æ”¯æŒMongoDBæ’ä»¶
- ğŸ”— https://railway.app

### æ–¹æ¡ˆ2ï¼šRender
- âœ… å…è´¹é¢åº¦ï¼šæœ‰é™åˆ¶ä½†å¤Ÿç”¨
- âœ… è‡ªåŠ¨éƒ¨ç½²
- âœ… æ”¯æŒMongoDB Atlas
- ğŸ”— https://render.com

### æ–¹æ¡ˆ3ï¼šVercelï¼ˆä»…APIï¼Œå‰ç«¯ç”¨GitHub Pagesï¼‰
- âœ… å®Œå…¨å…è´¹
- âœ… è‡ªåŠ¨éƒ¨ç½²
- âš ï¸ éœ€è¦å°†serveræ”¹ä¸ºserverlesså‡½æ•°
- ğŸ”— https://vercel.com

## ğŸš€ Railwayéƒ¨ç½²æ­¥éª¤ï¼ˆæ¨èï¼‰

### 1. å‡†å¤‡MongoDB Atlasï¼ˆäº‘ç«¯æ•°æ®åº“ï¼‰

1. **æ³¨å†ŒMongoDB Atlasè´¦å·**
   - è®¿é—®ï¼šhttps://www.mongodb.com/cloud/atlas/register
   - ä½¿ç”¨Googleè´¦å·æˆ–é‚®ç®±æ³¨å†Œï¼ˆå…è´¹ï¼‰

2. **åˆ›å»ºå…è´¹é›†ç¾¤**
   - é€‰æ‹©å…è´¹å¥—é¤ï¼ˆM0ï¼‰
   - é€‰æ‹©äº‘æœåŠ¡å•†å’Œåœ°åŒºï¼ˆå»ºè®®é€‰ç¦»ä½ è¿‘çš„ï¼‰
   - åˆ›å»ºé›†ç¾¤ï¼ˆéœ€è¦å‡ åˆ†é’Ÿï¼‰

3. **é…ç½®æ•°æ®åº“è®¿é—®**
   - ç‚¹å‡» "Database Access" â†’ "Add New Database User"
   - åˆ›å»ºç”¨æˆ·åå’Œå¯†ç ï¼ˆè®°ä½è¿™äº›ä¿¡æ¯ï¼‰
   - ç‚¹å‡» "Network Access" â†’ "Add IP Address"
   - é€‰æ‹© "Allow Access from Anywhere" (0.0.0.0/0) ç”¨äºå¼€å‘

4. **è·å–è¿æ¥å­—ç¬¦ä¸²**
   - ç‚¹å‡» "Connect" â†’ "Connect your application"
   - å¤åˆ¶è¿æ¥å­—ç¬¦ä¸²ï¼Œæ ¼å¼ç±»ä¼¼ï¼š
     ```
     mongodb+srv://ç”¨æˆ·å:å¯†ç @cluster0.xxxxx.mongodb.net/totofun-treasure?retryWrites=true&w=majority
     ```

### 2. éƒ¨ç½²åç«¯åˆ°Railway

1. **æ³¨å†ŒRailwayè´¦å·**
   - è®¿é—®ï¼šhttps://railway.app
   - ä½¿ç”¨GitHubè´¦å·ç™»å½•

2. **åˆ›å»ºæ–°é¡¹ç›®**
   - ç‚¹å‡» "New Project"
   - é€‰æ‹© "Deploy from GitHub repo"
   - é€‰æ‹©ä½ çš„ `douyin-treasure` ä»“åº“

3. **é…ç½®æœåŠ¡**
   - Railwayä¼šè‡ªåŠ¨æ£€æµ‹åˆ°serverç›®å½•
   - ç‚¹å‡»é¡¹ç›® â†’ "Settings" â†’ "Generate Domain" ç”ŸæˆåŸŸå
   - è®°å½•è¿™ä¸ªåŸŸåï¼ˆä¾‹å¦‚ï¼š`totofun-server.railway.app`ï¼‰

4. **è®¾ç½®ç¯å¢ƒå˜é‡**
   - åœ¨Railwayé¡¹ç›®é¡µé¢ï¼Œç‚¹å‡» "Variables"
   - æ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š
     ```
     MONGODB_URI=mongodb+srv://ç”¨æˆ·å:å¯†ç @cluster0.xxxxx.mongodb.net/totofun-treasure?retryWrites=true&w=majority
     JWT_SECRET=ä½ çš„éšæœºå¯†é’¥ï¼ˆè‡³å°‘32ä¸ªå­—ç¬¦ï¼‰
     JWT_REFRESH_SECRET=ä½ çš„åˆ·æ–°å¯†é’¥ï¼ˆè‡³å°‘32ä¸ªå­—ç¬¦ï¼‰
     JWT_EXPIRES_IN=7d
     NODE_ENV=production
     PORT=5000
     CLIENT_URL=https://luciuswang.github.io
     ```

5. **éƒ¨ç½²**
   - Railwayä¼šè‡ªåŠ¨éƒ¨ç½²
   - ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆçº¦2-3åˆ†é’Ÿï¼‰
   - è®¿é—®ï¼š`https://ä½ çš„åŸŸå.railway.app/health` æ£€æŸ¥æ˜¯å¦æˆåŠŸ

### 3. æ›´æ–°å‰ç«¯é…ç½®

1. **æ›´æ–°APIåœ°å€**
   - æ‰“å¼€ `index.html`
   - æ‰¾åˆ° `API_CONFIG` éƒ¨åˆ†
   - æ›´æ–° `BASE_URL` ä¸ºä½ çš„RailwayåŸŸå

2. **æ¨é€åˆ°GitHub**
   ```bash
   git add index.html
   git commit -m "æ›´æ–°APIåœ°å€ä¸ºäº‘æœåŠ¡"
   git push origin main
   ```

3. **GitHub Pagesä¼šè‡ªåŠ¨éƒ¨ç½²**
   - è®¿é—®ï¼šhttps://luciuswang.github.io/douyin-treasure/
   - ç°åœ¨å¯ä»¥æµ‹è¯•æ³¨å†Œ/ç™»å½•åŠŸèƒ½äº†ï¼

## ğŸ”§ Renderéƒ¨ç½²æ­¥éª¤ï¼ˆå¤‡é€‰ï¼‰

### 1. æ³¨å†ŒRenderè´¦å·
- è®¿é—®ï¼šhttps://render.com
- ä½¿ç”¨GitHubè´¦å·ç™»å½•

### 2. åˆ›å»ºWeb Service
- ç‚¹å‡» "New" â†’ "Web Service"
- è¿æ¥GitHubä»“åº“
- è®¾ç½®ï¼š
  - **Name**: totofun-server
  - **Root Directory**: server
  - **Environment**: Node
  - **Build Command**: `npm install`
  - **Start Command**: `node index.js`

### 3. è®¾ç½®ç¯å¢ƒå˜é‡
åœ¨Renderçš„Environment Variablesä¸­æ·»åŠ ï¼š
```
MONGODB_URI=ä½ çš„MongoDB Atlasè¿æ¥å­—ç¬¦ä¸²
JWT_SECRET=ä½ çš„å¯†é’¥
JWT_REFRESH_SECRET=ä½ çš„åˆ·æ–°å¯†é’¥
NODE_ENV=production
PORT=10000
```

### 4. éƒ¨ç½²
- Renderä¼šè‡ªåŠ¨éƒ¨ç½²
- è·å–æœåŠ¡URLï¼ˆä¾‹å¦‚ï¼š`totofun-server.onrender.com`ï¼‰
- æ›´æ–°å‰ç«¯APIé…ç½®

## ğŸ“ å¿«é€Ÿéƒ¨ç½²è„šæœ¬

æˆ‘å·²ç»åˆ›å»ºäº†é…ç½®æ–‡ä»¶ï¼Œä½ åªéœ€è¦ï¼š

1. **è®¾ç½®MongoDB Atlas**ï¼ˆ5åˆ†é’Ÿï¼‰
2. **éƒ¨ç½²åˆ°Railway**ï¼ˆ10åˆ†é’Ÿï¼‰
3. **æ›´æ–°å‰ç«¯APIåœ°å€**ï¼ˆ1åˆ†é’Ÿï¼‰

## âœ… éƒ¨ç½²åæ£€æŸ¥æ¸…å•

- [ ] MongoDB Atlasé›†ç¾¤å·²åˆ›å»º
- [ ] Railway/RenderæœåŠ¡å·²éƒ¨ç½²
- [ ] ç¯å¢ƒå˜é‡å·²è®¾ç½®
- [ ] å¥åº·æ£€æŸ¥é€šè¿‡ï¼š`https://ä½ çš„åŸŸå/health`
- [ ] å‰ç«¯APIåœ°å€å·²æ›´æ–°
- [ ] GitHub Pageså·²æ›´æ–°
- [ ] æµ‹è¯•æ³¨å†ŒåŠŸèƒ½
- [ ] æµ‹è¯•ç™»å½•åŠŸèƒ½

## ğŸ†˜ å¸¸è§é—®é¢˜

### Q: Railwayå…è´¹é¢åº¦å¤Ÿç”¨å—ï¼Ÿ
A: å…è´¹$5/æœˆï¼Œå¯¹äºä¸ªäººé¡¹ç›®å®Œå…¨å¤Ÿç”¨ã€‚å¦‚æœè¶…å‡ºï¼Œå¯ä»¥å‡çº§æˆ–ä½¿ç”¨Renderã€‚

### Q: MongoDB Atlaså…è´¹å—ï¼Ÿ
A: æ˜¯çš„ï¼ŒM0é›†ç¾¤å®Œå…¨å…è´¹ï¼Œ512MBå­˜å‚¨ç©ºé—´ï¼Œå¤Ÿç”¨ã€‚

### Q: éœ€è¦ä¿¡ç”¨å¡å—ï¼Ÿ
A: Railwayå’ŒMongoDB Atlaséƒ½ä¸éœ€è¦ä¿¡ç”¨å¡æ³¨å†Œå…è´¹å¥—é¤ã€‚

### Q: éƒ¨ç½²åå¦‚ä½•æ›´æ–°ï¼Ÿ
A: åªéœ€pushåˆ°GitHubï¼ŒRailway/Renderä¼šè‡ªåŠ¨é‡æ–°éƒ¨ç½²ã€‚

## ğŸ‰ å®Œæˆï¼

éƒ¨ç½²å®Œæˆåï¼Œä½ å°±å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è®¿é—®ä½ çš„åº”ç”¨äº†ï¼Œä¸éœ€è¦åœ¨å…¬å¸ç”µè„‘ä¸Šè¿è¡ŒæœåŠ¡å™¨ï¼

