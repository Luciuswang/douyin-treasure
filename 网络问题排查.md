# 🔍 网络问题排查指南

## 当前问题：SSL证书错误

**错误代码**: `NET::ERR_CERT_COMMON_NAME_INVALID`

这个错误通常表示：
1. **公司网络代理拦截** - 公司防火墙/代理服务器在拦截HTTPS连接
2. **SSL证书不匹配** - 公司安装了自签名证书进行流量检测
3. **DNS劫持** - 公司DNS服务器可能重定向了请求

## 🔍 诊断步骤

### 步骤1：检查是否在公司网络

**症状**：
- ✅ 访问 `https://totofun-server007.vercel.app/health` 出现SSL错误
- ✅ 其他HTTPS网站也可能有问题
- ✅ 使用手机热点可以正常访问

### 步骤2：测试其他Vercel网站

尝试访问：
- `https://vercel.com` - 如果这个也打不开，说明公司网络限制了Vercel
- `https://github.com` - 检查GitHub是否可访问

### 步骤3：使用手机热点测试

1. 关闭WiFi，使用手机热点
2. 访问：`https://totofun-server007.vercel.app/health`
3. 如果能正常访问，说明确实是公司网络问题

## ✅ 解决方案

### 方案1：使用手机热点（临时测试）

**优点**：
- 快速验证问题
- 不影响公司网络设置

**缺点**：
- 只能临时使用
- 流量消耗

### 方案2：配置代理绕过（如果公司允许）

如果公司允许，可以配置代理绕过某些域名。

### 方案3：使用国内云服务（推荐）

如果公司网络长期限制Vercel，建议使用国内云服务：

#### 选项A：使用LeanCloud（国内，免费）
- ✅ 国内访问速度快
- ✅ 免费额度充足
- ✅ 支持云函数和数据库

#### 选项B：使用阿里云/腾讯云
- ✅ 国内服务，速度快
- ✅ 稳定可靠
- ⚠️ 需要实名认证

#### 选项C：使用Railway（国外，但可能更稳定）
- ✅ 免费额度
- ✅ 可能比Vercel更稳定
- ⚠️ 仍然可能被公司网络限制

## 🧪 快速测试

### 测试1：检查网络环境

在浏览器控制台执行：
```javascript
// 检查是否在公司网络
fetch('https://totofun-server007.vercel.app/health')
  .then(r => r.json())
  .then(data => console.log('✅ 可以访问:', data))
  .catch(err => console.error('❌ 无法访问:', err));
```

### 测试2：使用curl（如果可用）

```bash
curl -v https://totofun-server007.vercel.app/health
```

### 测试3：使用手机热点

1. 手机开启热点
2. 电脑连接手机热点
3. 访问 `https://totofun-server007.vercel.app/health`
4. 如果成功，说明是公司网络问题

## 📝 如果确认是公司网络问题

### 短期方案：
1. 使用手机热点进行开发和测试
2. 或者在家里的网络环境下测试

### 长期方案：
1. 考虑部署到国内云服务（LeanCloud、阿里云等）
2. 或者使用公司允许的代理服务

## 🎯 下一步行动

1. **立即测试**：使用手机热点访问健康检查端点
2. **确认问题**：如果能访问，说明是公司网络限制
3. **选择方案**：根据实际情况选择短期或长期解决方案

