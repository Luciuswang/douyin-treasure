# ✅ Vercel部署检查清单

按照这个清单一步步完成部署：

## 📋 第一步：MongoDB Atlas（5分钟）

- [ ] 注册MongoDB Atlas账号
- [ ] 创建免费集群（M0）
- [ ] 创建数据库用户（记住用户名和密码）
- [ ] 配置网络访问（添加 0.0.0.0/0）
- [ ] 获取连接字符串
- [ ] 替换连接字符串中的 `<password>` 为实际密码
- [ ] 在连接字符串末尾添加 `/totofun-treasure`

**连接字符串格式**：
```
mongodb+srv://用户名:密码@cluster0.xxxxx.mongodb.net/totofun-treasure?retryWrites=true&w=majority
```

## 🔑 第二步：生成密钥（1分钟）

- [ ] 生成 `JWT_SECRET`（64字符随机字符串）
- [ ] 生成 `JWT_REFRESH_SECRET`（另一个64字符随机字符串）

**生成工具**：https://randomkeygen.com/

## 🚀 第三步：部署到Vercel（10分钟）

- [ ] 访问 https://vercel.com
- [ ] 使用GitHub账号登录
- [ ] 点击 "Add New Project"
- [ ] 导入 `douyin-treasure` 仓库
- [ ] 配置项目：
  - [ ] Framework Preset: **Other**
  - [ ] Root Directory: **server**
- [ ] 添加环境变量：
  - [ ] `MONGODB_URI` = 你的MongoDB连接字符串
  - [ ] `JWT_SECRET` = 你的JWT密钥
  - [ ] `JWT_REFRESH_SECRET` = 你的刷新密钥
  - [ ] `JWT_EXPIRES_IN` = `7d`
  - [ ] `NODE_ENV` = `production`
  - [ ] `CLIENT_URL` = `https://luciuswang.github.io`
- [ ] 点击 "Deploy"
- [ ] 等待部署完成
- [ ] 复制部署地址（例如：`https://totofun-server.vercel.app`）

## 🧪 第四步：测试部署（2分钟）

- [ ] 访问：`https://你的域名.vercel.app/health`
- [ ] 确认返回JSON响应（status: "ok"）
- [ ] 如果返回500错误，检查：
  - [ ] MongoDB连接字符串是否正确
  - [ ] IP白名单是否配置
  - [ ] 环境变量是否全部设置

## 🔧 第五步：更新前端（2分钟）

- [ ] 打开 `index.html`
- [ ] 找到 `CLOUD_API_URL`（约第723行）
- [ ] 设置为你的Vercel域名：
  ```javascript
  CLOUD_API_URL: 'https://你的域名.vercel.app',
  ```
- [ ] 保存文件
- [ ] 推送到GitHub：
  ```bash
  git add index.html
  git commit -m "配置Vercel API地址"
  git push origin main
  ```

## 🎉 第六步：测试功能（3分钟）

- [ ] 等待GitHub Pages部署完成（1-2分钟）
- [ ] 访问：https://luciuswang.github.io/douyin-treasure/
- [ ] 打开浏览器控制台（F12）
- [ ] 点击"登录/注册"
- [ ] 尝试注册新账号
- [ ] 检查Network标签，确认请求发送到Vercel地址
- [ ] 确认注册成功
- [ ] 尝试登录
- [ ] 确认登录成功

## ✨ 完成！

如果所有步骤都打勾了，恭喜你！应用已经成功部署到云端！

## 🆘 遇到问题？

如果某个步骤失败：
1. 查看对应的详细文档：`Vercel部署步骤.md`
2. 检查Vercel部署日志
3. 检查浏览器控制台错误
4. 告诉我具体在哪一步遇到问题

